<!doctype html><html lang=en-us><head><meta name=generator content="Hugo 0.145.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>FangjieYu‘s Hugo Site</title><meta name=Description content="This is my cool site"><meta property="og:url" content="https://fjyu95.github.io/">
<meta property="og:site_name" content="FangjieYu‘s Hugo Site"><meta property="og:title" content="FangjieYu‘s Hugo Site"><meta property="og:description" content="This is my cool site"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="FangjieYu‘s Hugo Site"><meta name=twitter:description content="This is my cool site"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://fjyu95.github.io/><link rel=alternate href=/index.xml type=application/rss+xml title="FangjieYu‘s Hugo Site"><link rel=feed href=/index.xml type=application/rss+xml title="FangjieYu‘s Hugo Site"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/fjyu95.github.io\/","inLanguage":"en-us","author":{"@type":"Person","name":"xxxx"},"description":"This is my cool site","name":"FangjieYu‘s Hugo Site"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="FangjieYu‘s Hugo Site">My cool site</a></div><div class=menu><div class=menu-inner><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="FangjieYu‘s Hugo Site">My cool site</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class="page home" data-home=posts><div class=home-profile><div class=home-subtitle><div id=id-1 class=typeit></div></div><div class=links></div></div><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E7%99%BE%E5%BA%A6paddle-fluid.layers.fc-api%E8%AF%B4%E6%98%8E/></a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=0001-01-01>0001-01-01</time></span></div><div class=content><p>学习百度的PaddlePaddle框架时，看到第一个线性回归的例子，对其中的fluid.layers.fc()函数使用有点困惑，查看官方API文档，感觉写的也不是特别清晰（可能是我理解的不好），经过一些思考后感觉应该是理解了，这里做一下总结。
下面是部分代码：</p><pre tabindex=0><code># 定义X数值
train_data=numpy.array([[1.0], [2.0], [3.0], [4.0]]).astype(&#39;float32&#39;)
# 定义期望预测的真实值y_true
y_true = numpy.array([[2.0], [4.0], [6.0], [8.0]]).astype(&#39;float32&#39;)

# 定义输入数据类型
x = fluid.data(name=&#34;x&#34;, shape=[None, 1], dtype=&#39;float32&#39;)
y = fluid.data(name=&#34;y&#34;, shape=[None, 1], dtype=&#39;float32&#39;)
# 搭建全连接网络
y_predict = fluid.layers.fc(input=x, size=1, act=None)
</code></pre><p>fluid.layers.fc接口如下</p><pre tabindex=0><code>paddle.fluid.layers.fc(input, size, num_flatten_dims=1, param_attr=None, bias_attr=None, act=None, name=None)
</code></pre><p>参数说明:
input ：多维Tensor或多个Tensor组成的list，输入Tensor的shape至少是2。
size： 全连接层输出单元的数目，即输出Tensor的特征维度。
num_flatten_dims(int)：在计算时，输入首先会被扁平化（flatten）为一个二维矩阵，之后再与权重(weights)相乘。参数 num_flatten_dims 决定了输入Tensor的flatten方式。
param_attr：指定权重参数属性的对象。默认值为None，表示使用默认的权重参数属性。
bias_attr：指定偏置参数属性的对象。默认值为None，表示使用默认的偏置参数属性。
act：应用于输出上的激活函数，如tanh、softmax、sigmoid，relu等。
name(str，可选)：一般无需设置，默认值为None。</p><p>fluid.layers.fc函数重点是前三个参数，输入Tensor的shape至少是2是理解这个API的核心，具体是<strong>不管输入Tensor的shape是多少，都会根据num_flatten_dims扁平化为二维矩阵</strong>，其中第一维是batch_size，第二维是输入Tensor的特征维度，计算时与一个权重矩阵相乘，输出shape为 [batch_size,size]的Tensor。</p><p>例如， 假设X是一个五维的Tensor，其shape为(2, 3, 4, 5, 6), 若 num_flatten_dims=3，则扁平化的矩阵shape为： (2x3x4,5x6)=(24,30) ，最终输出Tensor的shape为 (24,size) 。</p></div><div class=post-footer><a href=/posts/%E7%99%BE%E5%BA%A6paddle-fluid.layers.fc-api%E8%AF%B4%E6%98%8E/>Read More</a></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h1 class=single-title itemprop="name headline"><a href=/posts/%E7%99%BE%E5%BA%A6paddlepaddle%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/></a></h1><div class=post-meta><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xxxx</a></span>&nbsp;<span class=post-publish>published on <time datetime=0001-01-01>0001-01-01</time></span></div><div class=content><p>一直想学习一下百度的paddle框架，按照官方教程安装时，感觉步骤写的太繁琐，于是根据之前安装其他框架的经验进行尝试，使用最简单的anaconda方式进行安装，很快成功，记录一下过程。</p><p>一、 安装准备</p><ol><li>anaconda</li><li>CUDA10.0、cudnn</li><li>paddlepaddle-gpu离线包（选择红色框选中的）
url：<a href=https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/Paddle/ target=_blank rel="noopener noreffer">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/Paddle/</a>
<img class=lazyload src=/svg/loading.min.svg data-src=https://i-blog.csdnimg.cn/blog_migrate/3e9b08e56a9a6e5f0875ba2817fe3646.png data-srcset="https://i-blog.csdnimg.cn/blog_migrate/3e9b08e56a9a6e5f0875ba2817fe3646.png, https://i-blog.csdnimg.cn/blog_migrate/3e9b08e56a9a6e5f0875ba2817fe3646.png 1.5x, https://i-blog.csdnimg.cn/blog_migrate/3e9b08e56a9a6e5f0875ba2817fe3646.png 2x" data-sizes=auto alt=https://i-blog.csdnimg.cn/blog_migrate/3e9b08e56a9a6e5f0875ba2817fe3646.png title=在这里插入图片描述>
二、安装步骤
1.创建虚拟环境
conda create -n paddle_env python=3.5
2.激活环境
activate paddle_env
3.安装paddle框架
conda install paddlepaddle-gpu-1.6.2-py35_gpu_cuda10.0_windows.tar.bz2
<img class=lazyload src=/svg/loading.min.svg data-src=https://i-blog.csdnimg.cn/blog_migrate/3236696f8abc0a273e1c444fdcacf542.png data-srcset="https://i-blog.csdnimg.cn/blog_migrate/3236696f8abc0a273e1c444fdcacf542.png, https://i-blog.csdnimg.cn/blog_migrate/3236696f8abc0a273e1c444fdcacf542.png 1.5x, https://i-blog.csdnimg.cn/blog_migrate/3236696f8abc0a273e1c444fdcacf542.png 2x" data-sizes=auto alt=https://i-blog.csdnimg.cn/blog_migrate/3236696f8abc0a273e1c444fdcacf542.png title=在这里插入图片描述>
(注意：使用pip install 命令安装会报错，原因还不清楚)
4.安装环境验证
使用python进入python解释器，输入import paddle.fluid，再输入 paddle.fluid.install_check.run_check()。如果出现“Your Paddle Fluid is installed succesfully!”，说明成功安装。
<img class=lazyload src=/svg/loading.min.svg data-src=https://i-blog.csdnimg.cn/blog_migrate/e4ddabee9fabcfe1e8fc82bcb97fe3e6.png data-srcset="https://i-blog.csdnimg.cn/blog_migrate/e4ddabee9fabcfe1e8fc82bcb97fe3e6.png, https://i-blog.csdnimg.cn/blog_migrate/e4ddabee9fabcfe1e8fc82bcb97fe3e6.png 1.5x, https://i-blog.csdnimg.cn/blog_migrate/e4ddabee9fabcfe1e8fc82bcb97fe3e6.png 2x" data-sizes=auto alt=https://i-blog.csdnimg.cn/blog_migrate/e4ddabee9fabcfe1e8fc82bcb97fe3e6.png title=在这里插入图片描述>
(说明：输入import paddle.fluid可能会报错，提示找不到某些包，pip install 进行安装即可)</li></ol><p>比如提示找不到‘nltk’包
<img class=lazyload src=/svg/loading.min.svg data-src=https://i-blog.csdnimg.cn/blog_migrate/dd6f3c4366649824a1824389ffc5b5ef.png data-srcset="https://i-blog.csdnimg.cn/blog_migrate/dd6f3c4366649824a1824389ffc5b5ef.png, https://i-blog.csdnimg.cn/blog_migrate/dd6f3c4366649824a1824389ffc5b5ef.png 1.5x, https://i-blog.csdnimg.cn/blog_migrate/dd6f3c4366649824a1824389ffc5b5ef.png 2x" data-sizes=auto alt=https://i-blog.csdnimg.cn/blog_migrate/dd6f3c4366649824a1824389ffc5b5ef.png title=在这里插入图片描述>
pip 命令安装
<img class=lazyload src=/svg/loading.min.svg data-src=https://i-blog.csdnimg.cn/blog_migrate/17ccbe6d346ae37ca54abffeb3b9a73d.png data-srcset="https://i-blog.csdnimg.cn/blog_migrate/17ccbe6d346ae37ca54abffeb3b9a73d.png, https://i-blog.csdnimg.cn/blog_migrate/17ccbe6d346ae37ca54abffeb3b9a73d.png 1.5x, https://i-blog.csdnimg.cn/blog_migrate/17ccbe6d346ae37ca54abffeb3b9a73d.png 2x" data-sizes=auto alt=https://i-blog.csdnimg.cn/blog_migrate/17ccbe6d346ae37ca54abffeb3b9a73d.png title=在这里插入图片描述></p></div><div class=post-footer><a href=/posts/%E7%99%BE%E5%BA%A6paddlepaddle%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/>Read More</a></div></article></div></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>xxxx</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},data:{"id-1":"This is my cool site"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>