<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>å¼€æº3dé‡å»ºç³»ç»Ÿ - FangjieYuâ€˜s site</title><meta name=Description content="This is my cool site"><meta property="og:url" content="https://fjyu95.github.io/posts/%D1%85%D0%B0%D1%86%D1%803d%D1%89%D0%B7%D0%BD%D1%85%D1%87%D1%87%D1%8F-139e4020f060802d9629dfad7d7f0b5c/">
<meta property="og:site_name" content="FangjieYuâ€˜s site"><meta property="og:title" content="å¼€æº3dé‡å»ºç³»ç»Ÿ"><meta property="og:description" content="OpenSfM æ›´é€‚åˆGISé¢†åŸŸ
COLMAP å­¦æœ¯ç•Œæ›´æµè¡Œ
OpenMVG + OpenMVS
mvs-texturing
ç»¿è‰²è¡¨ç¤ºæ”¯æŒï¼Œçº¢è‰²è¡¨ç¤ºä¸æ”¯æŒ
COLMAP install https://github.com/colmap/colmap
https://colmap.github.io/install.html
https://repology.org/project/colmap/versions
pipline https://blog.csdn.net/m0_56836274/article/details/139245630
dockeræ–¹å¼å®‰è£… https://hub.docker.com/r/colmap/colmap
FAQ 1ã€Dense stereo reconstruction requiresÂ CUDA, which is not available on your system. ç¨ å¯†é‡å»ºå¿…é¡»å®‰è£…é…ç½®cuda"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-09T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-21T00:00:00+00:00"><meta property="article:tag" content="3d"><meta property="article:tag" content="Colmap"><meta property="article:tag" content="Opensvm"><meta property="article:tag" content="Sfm"><meta name=twitter:card content="summary"><meta name=twitter:title content="å¼€æº3dé‡å»ºç³»ç»Ÿ"><meta name=twitter:description content="OpenSfM æ›´é€‚åˆGISé¢†åŸŸ
COLMAP å­¦æœ¯ç•Œæ›´æµè¡Œ
OpenMVG + OpenMVS
mvs-texturing
ç»¿è‰²è¡¨ç¤ºæ”¯æŒï¼Œçº¢è‰²è¡¨ç¤ºä¸æ”¯æŒ
COLMAP install https://github.com/colmap/colmap
https://colmap.github.io/install.html
https://repology.org/project/colmap/versions
pipline https://blog.csdn.net/m0_56836274/article/details/139245630
dockeræ–¹å¼å®‰è£… https://hub.docker.com/r/colmap/colmap
FAQ 1ã€Dense stereo reconstruction requiresÂ CUDA, which is not available on your system. ç¨ å¯†é‡å»ºå¿…é¡»å®‰è£…é…ç½®cuda"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://fjyu95.github.io/posts/%D1%85%D0%B0%D1%86%D1%803d%D1%89%D0%B7%D0%BD%D1%85%D1%87%D1%87%D1%8F-139e4020f060802d9629dfad7d7f0b5c/><link rel=prev href=https://fjyu95.github.io/posts/3dgs-138e4020f06080e7b9ced1f2074982d5/><link rel=next href=https://fjyu95.github.io/posts/diy%D1%88%D0%B3%D0%B5%D1%86%D1%8C-14fe4020f0608024989ac1aa0736caa5/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"å¼€æº3dé‡å»ºç³»ç»Ÿ","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/fjyu95.github.io\/posts\/%D1%85%D0%B0%D1%86%D1%803d%D1%89%D0%B7%D0%BD%D1%85%D1%87%D1%87%D1%8F-139e4020f060802d9629dfad7d7f0b5c\/"},"genre":"posts","keywords":"3d, colmap, opensvm, sfm","wordcount":2567,"url":"https:\/\/fjyu95.github.io\/posts\/%D1%85%D0%B0%D1%86%D1%803d%D1%89%D0%B7%D0%BD%D1%85%D1%87%D1%87%D1%8F-139e4020f060802d9629dfad7d7f0b5c\/","datePublished":"2024-11-09T00:00:00+00:00","dateModified":"2025-04-21T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"fjyu95"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="FangjieYuâ€˜s site">fjyu95</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>posts </a><a class=menu-item href=/tags/>tags </a><a class=menu-item href=/categories/>category </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="FangjieYuâ€˜s site">fjyu95</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>posts</a><a class=menu-item href=/tags/ title>tags</a><a class=menu-item href=/categories/ title>category</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">å¼€æº3dé‡å»ºç³»ç»Ÿ</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://fjyu95.github.io/ title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>fjyu95</a></span>&nbsp;<span class=post-category>included in <a href=/categories/3d/><i class="far fa-folder fa-fw" aria-hidden=true></i>3d</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2024-11-09>2024-11-09</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;2567 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#colmap-install>COLMAP install</a><ul><li><a href=#pipline>pipline</a></li><li><a href=#dockeræ–¹å¼å®‰è£…>dockeræ–¹å¼å®‰è£…</a></li><li><a href=#faq>FAQ</a><ul><li><a href=#1dense-stereo-reconstruction-requirescuda-which-is-not-available-on-your-system><strong>1ã€Dense stereo reconstruction requiresÂ CUDA, which is not available on your system.</strong></a></li><li><a href=#2no-good-initial-image-pair-found>2ã€No good initial image pair found.</a></li><li><a href=#1-insufficient-overlap-between-images>1. <strong>Insufficient Overlap Between Images</strong></a></li><li><a href=#2-low-quality-or-poorly-captured-images>2. <strong>Low-Quality or Poorly Captured Images</strong></a></li><li><a href=#3-incorrect-camera-parameters>3. <strong>Incorrect Camera Parameters</strong></a></li><li><a href=#4-inadequate-feature-extraction-or-matching>4. <strong>Inadequate Feature Extraction or Matching</strong></a></li><li><a href=#5-misconfigured-camera-model>5. <strong>Misconfigured Camera Model</strong></a></li><li><a href=#6-image-quality-control>6. <strong>Image Quality Control</strong></a></li><li><a href=#7-try-manual-initialization>7. <strong>Try Manual Initialization</strong></a></li><li><a href=#8-image-scale-or-alignment-issues>8. <strong>Image Scale or Alignment Issues</strong></a></li><li><a href=#next-steps>Next Steps:</a></li><li><a href=#3ç¨€ç–ç‚¹äº‘æ ¼å¼>3ã€ç¨€ç–ç‚¹äº‘æ ¼å¼</a></li><li><a href=#-colmap-ç¨€ç–ç‚¹äº‘çš„ç›®å½•ç»“æ„åŠæ–‡ä»¶æ ¼å¼><strong>ğŸ“Œ COLMAP ç¨€ç–ç‚¹äº‘çš„ç›®å½•ç»“æ„åŠæ–‡ä»¶æ ¼å¼</strong></a></li></ul></li><li><a href=#-1-ç¨€ç–ç‚¹äº‘çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼é»˜è®¤><strong>ğŸ“‚ 1. ç¨€ç–ç‚¹äº‘çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼ˆé»˜è®¤ï¼‰</strong></a><ul><li><a href=#å¦‚ä½•è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼å¯è¯»><strong>å¦‚ä½•è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼ï¼ˆå¯è¯»ï¼‰</strong></a></li></ul></li><li><a href=#-2-è§£æ-colmap-ç”Ÿæˆçš„><strong>ğŸ“„ 2. è§£æ COLMAP ç”Ÿæˆçš„ <code>txt</code> æ–‡ä»¶</strong></a><ul><li><a href=#1-camerastxt><strong>(1) cameras.txt</strong></a></li><li><a href=#2-imagestxt><strong>(2) images.txt</strong></a></li><li><a href=#3-points3dtxt><strong>(3) points3D.txt</strong></a></li></ul></li><li><a href=#-3-ply-æ ¼å¼å¯è§†åŒ–ç”¨><strong>ğŸ“‚ 3. PLY æ ¼å¼ï¼ˆå¯è§†åŒ–ç”¨ï¼‰</strong></a></li><li><a href=#-æ€»ç»“><strong>ğŸ’¡ æ€»ç»“</strong></a><ul><li><a href=#4å¤–å‚è¡¨ç¤ºå½¢å¼>4ã€å¤–å‚è¡¨ç¤ºå½¢å¼</a></li><li><a href=#1-colmap-å¤–å‚çš„å­˜å‚¨æ ¼å¼><strong>1. COLMAP å¤–å‚çš„å­˜å‚¨æ ¼å¼</strong></a></li><li><a href=#2-å¤–å‚çš„æ•°å­¦å«ä¹‰><strong>2. å¤–å‚çš„æ•°å­¦å«ä¹‰</strong></a></li><li><a href=#3-ä»-colmap-æå–å¤–å‚><strong>3. ä» COLMAP æå–å¤–å‚</strong></a></li><li><a href=#4-è§£æäºŒè¿›åˆ¶><strong>4. è§£æäºŒè¿›åˆ¶ <code>images.bin</code></strong></a></li><li><a href=#æ€»ç»“><strong>æ€»ç»“</strong></a></li></ul></li></ul></li><li><a href=#meshlab>meshlab</a></li></ul></nav></div></div><div class=content id=content><p>OpenSfM æ›´é€‚åˆGISé¢†åŸŸ</p><p>COLMAP å­¦æœ¯ç•Œæ›´æµè¡Œ</p><p><strong>OpenMVG + OpenMVS</strong></p><p>mvs-texturing</p><p><img class=lazyload src=/svg/loading.min.svg data-src=%E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image.png data-srcset="%E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image.png, %E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image.png 1.5x, %E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image.png 2x" data-sizes=auto alt=%E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image.png title=image.png></p><p>ç»¿è‰²è¡¨ç¤ºæ”¯æŒï¼Œçº¢è‰²è¡¨ç¤ºä¸æ”¯æŒ</p><p><img class=lazyload src=/svg/loading.min.svg data-src=%E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image%201.png data-srcset="%E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image%201.png, %E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image%201.png 1.5x, %E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image%201.png 2x" data-sizes=auto alt=%E5%BC%80%E6%BA%903d%E9%87%8D%E5%BB%BA%E7%B3%BB%E7%BB%9F%20139e4020f060802d9629dfad7d7f0b5c/image%201.png title=image.png></p><h1 id=colmap-install>COLMAP install</h1><p><a href=https://github.com/colmap/colmap target=_blank rel="noopener noreffer">https://github.com/colmap/colmap</a></p><p><a href=https://colmap.github.io/install.html target=_blank rel="noopener noreffer">https://colmap.github.io/install.html</a></p><p><a href=https://repology.org/project/colmap/versions target=_blank rel="noopener noreffer">https://repology.org/project/colmap/versions</a></p><h2 id=pipline>pipline</h2><p><a href=https://blog.csdn.net/m0_56836274/article/details/139245630 target=_blank rel="noopener noreffer">https://blog.csdn.net/m0_56836274/article/details/139245630</a></p><h2 id=dockeræ–¹å¼å®‰è£…>dockeræ–¹å¼å®‰è£…</h2><p><a href=https://hub.docker.com/r/colmap/colmap target=_blank rel="noopener noreffer">https://hub.docker.com/r/colmap/colmap</a></p><h2 id=faq>FAQ</h2><h3 id=1dense-stereo-reconstruction-requirescuda-which-is-not-available-on-your-system><strong>1ã€Dense stereo reconstruction requiresÂ CUDA, which is not available on your system.</strong></h3><p>ç¨ å¯†é‡å»ºå¿…é¡»å®‰è£…é…ç½®cuda</p><h3 id=2no-good-initial-image-pair-found>2ã€No good initial image pair found.</h3><p>The error <strong>&ldquo;No good initial image pair found&rdquo;</strong> in COLMAP typically occurs during the feature matching or structure-from-motion (SfM) pipeline, specifically when COLMAP is unable to find a good pair of images to start the matching process.</p><p>Here are some common causes and solutions for this error:</p><h3 id=1-insufficient-overlap-between-images>1. <strong>Insufficient Overlap Between Images</strong></h3><ul><li><strong>Cause</strong>: If the images do not have enough overlap (i.e., common features), COLMAP may struggle to find a good initial image pair.</li><li><strong>Solution</strong>:<ul><li>Ensure that your images have significant overlap and that the camera movement between shots isn&rsquo;t too large.</li><li>Try to include images with obvious common features.</li></ul></li></ul><h3 id=2-low-quality-or-poorly-captured-images>2. <strong>Low-Quality or Poorly Captured Images</strong></h3><ul><li><strong>Cause</strong>: Images with poor resolution, blurriness, or noise may not have enough features to match.</li><li><strong>Solution</strong>:<ul><li>Use higher-quality images with clear details and fewer blurry areas.</li><li>Ensure images have distinct features that are easy to detect.</li></ul></li></ul><h3 id=3-incorrect-camera-parameters>3. <strong>Incorrect Camera Parameters</strong></h3><ul><li><strong>Cause</strong>: Incorrect camera intrinsic parameters (focal length, principal point, etc.) can affect the feature matching process.</li><li><strong>Solution</strong>:<ul><li>If you have camera calibration data, make sure to input the correct intrinsic parameters in COLMAP.</li><li>If unsure, you can use the <strong>Automatic Calibration</strong> option in COLMAP to let it estimate the parameters.</li></ul></li></ul><h3 id=4-inadequate-feature-extraction-or-matching>4. <strong>Inadequate Feature Extraction or Matching</strong></h3><ul><li><strong>Cause</strong>: The feature extraction and matching process may not be set up optimally, leading to no good matches between images.</li><li><strong>Solution</strong>:<ul><li>Increase the number of features extracted by adjusting the parameters in <strong>Feature Extraction</strong> (e.g., increase the number of keypoints, use different detectors like SIFT or ORB).</li><li>Use <strong>More Robust Matching</strong> by adjusting matching parameters or enabling <strong>Exhaustive Matching</strong>.</li></ul></li></ul><h3 id=5-misconfigured-camera-model>5. <strong>Misconfigured Camera Model</strong></h3><ul><li><strong>Cause</strong>: The selected camera model may not suit your dataset, especially if you&rsquo;re using a non-standard or specific camera type.</li><li><strong>Solution</strong>:<ul><li>Check if you&rsquo;re using the correct camera model in COLMAP. If you are using a non-standard camera, try defining the camera model manually or adjust the model settings.</li></ul></li></ul><h3 id=6-image-quality-control>6. <strong>Image Quality Control</strong></h3><ul><li><strong>Solution</strong>: You can try running the image set through a tool that automatically detects problematic images. If certain images are out of focus, poorly exposed, or lack sufficient texture, COLMAP might fail to create a good initial match. Removing or fixing these images could help.</li></ul><h3 id=7-try-manual-initialization>7. <strong>Try Manual Initialization</strong></h3><ul><li><strong>Solution</strong>: If automatic initialization fails, you can try <strong>manual initialization</strong>. In COLMAP, you can manually select two images to initialize the SfM pipeline. This can sometimes bypass the issue when automatic matching is not successful.</li></ul><h3 id=8-image-scale-or-alignment-issues>8. <strong>Image Scale or Alignment Issues</strong></h3><ul><li><strong>Cause</strong>: Images might have been resized or improperly aligned (e.g., if they come from different sources with different camera settings or scales).</li><li><strong>Solution</strong>: Make sure all images are aligned correctly, and if they were resized or downsampled, consider working with the original images.</li></ul><hr><h3 id=next-steps>Next Steps:</h3><ul><li>Start by reviewing the dataset and checking for any obvious issues with the images (e.g., overlap, quality).</li><li>Try adjusting the parameters for feature extraction and matching in COLMAP.</li><li>If the issue persists, consider using manual initialization to give COLMAP a better starting point.</li></ul><p>Let me know if you&rsquo;d like specific steps on how to adjust these settings in COLMAP!</p><h3 id=3ç¨€ç–ç‚¹äº‘æ ¼å¼>3ã€ç¨€ç–ç‚¹äº‘æ ¼å¼</h3><h3 id=-colmap-ç¨€ç–ç‚¹äº‘çš„ç›®å½•ç»“æ„åŠæ–‡ä»¶æ ¼å¼><strong>ğŸ“Œ COLMAP ç¨€ç–ç‚¹äº‘çš„ç›®å½•ç»“æ„åŠæ–‡ä»¶æ ¼å¼</strong></h3><p>COLMAP ç”Ÿæˆçš„ <strong>ç¨€ç–é‡å»ºï¼ˆSparse Reconstructionï¼‰</strong> ç»“æœé€šå¸¸ä¿å­˜åœ¨ <code>sparse/</code> ç›®å½•ä¸‹ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š</p><pre tabindex=0><code>COLMAP_PROJECT/
â”‚â”€â”€ images/             # è¾“å…¥å›¾åƒ
â”‚â”€â”€ sparse/             # ç¨€ç–ç‚¹äº‘æ•°æ®
â”‚   â”œâ”€â”€ 0/              # ç¬¬ä¸€ç»„ç¨€ç–é‡å»ºï¼ˆå¯æœ‰å¤šä¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ cameras.bin       # ç›¸æœºå†…å‚ä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ images.bin        # å›¾åƒçš„ä½å§¿ (R, T) åŠ 3D-2D è§‚æµ‹å…³ç³»
â”‚   â”‚   â”œâ”€â”€ points3D.bin      # 3Dç‚¹äº‘æ•°æ®
â”‚   â”œâ”€â”€ txt/            # å¯é€‰ï¼šè½¬æ¢åçš„æ–‡æœ¬æ ¼å¼ï¼ˆcameras.txt, images.txt, points3D.txtï¼‰
â”‚   â”œâ”€â”€ pointcloud.ply  # å¯é€‰ï¼šPLY æ ¼å¼ç‚¹äº‘ï¼ˆç”¨äºå¯è§†åŒ–ï¼‰
â”‚â”€â”€ database.db         # COLMAP æ•°æ®åº“ï¼ˆå­˜å‚¨ç‰¹å¾ç‚¹ã€åŒ¹é…å…³ç³»ç­‰ï¼‰
â”‚â”€â”€ dense/              # ç¨ å¯†é‡å»ºï¼ˆMVSï¼‰
â”‚â”€â”€ ...
</code></pre><p><code>0/</code> ç›®å½•è¡¨ç¤ºç¬¬ä¸€ä¸ªé‡å»ºæ¨¡å‹ï¼Œå¦‚æœä½ è¿›è¡Œäº†å¤šæ¬¡ <strong>Incremental Reconstruction</strong>ï¼Œå¯èƒ½ä¼šæœ‰ <code>1/</code>, <code>2/</code> ç­‰å¤šä¸ªé‡å»ºæ¨¡å‹ã€‚</p><hr><h2 id=-1-ç¨€ç–ç‚¹äº‘çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼é»˜è®¤><strong>ğŸ“‚ 1. ç¨€ç–ç‚¹äº‘çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼ˆé»˜è®¤ï¼‰</strong></h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒCOLMAP ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨æ•°æ®ï¼š</p><table><thead><tr><th>æ–‡ä»¶å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>cameras.bin</code></td><td>ç›¸æœºçš„å†…å‚ï¼ˆç„¦è·ã€ä¸»ç‚¹ã€ç•¸å˜ç³»æ•°ç­‰ï¼‰</td></tr><tr><td><code>images.bin</code></td><td>ç›¸æœºçš„å¤–å‚ï¼ˆä½å§¿ R, Tï¼‰å’Œ 3D-2D å¯¹åº”å…³ç³»</td></tr><tr><td><code>points3D.bin</code></td><td>ç¨€ç– 3D ç‚¹äº‘ï¼ˆåŒ…å«é¢œè‰²ã€é‡æŠ•å½±è¯¯å·®ç­‰ï¼‰</td></tr></tbody></table><h3 id=å¦‚ä½•è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼å¯è¯»><strong>å¦‚ä½•è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼ï¼ˆå¯è¯»ï¼‰</strong></h3><p>å¯ä»¥ä½¿ç”¨ <code>colmap model_converter</code> è½¬æ¢ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>colmap model_converter --input_path sparse/0 --output_path sparse/txt --output_type TXT
</span></span></code></pre></div><p>è¿™æ ·ä¼šç”Ÿæˆï¼š</p><ul><li><code>cameras.txt</code></li><li><code>images.txt</code></li><li><code>points3D.txt</code></li></ul><hr><h2 id=-2-è§£æ-colmap-ç”Ÿæˆçš„><strong>ğŸ“„ 2. è§£æ COLMAP ç”Ÿæˆçš„ <code>txt</code> æ–‡ä»¶</strong></h2><h3 id=1-camerastxt><strong>(1) cameras.txt</strong></h3><p>å­˜å‚¨ç›¸æœºçš„å†…å‚ï¼Œæ¯è¡Œæ ¼å¼å¦‚ä¸‹ï¼š</p><pre tabindex=0><code>&lt;camera_id&gt; &lt;model&gt; &lt;width&gt; &lt;height&gt; &lt;params&gt;
</code></pre><p>ç¤ºä¾‹ï¼š</p><pre tabindex=0><code>1 PINHOLE 1920 1080 1500.0 960.0 540.0
</code></pre><ul><li><code>PINHOLE</code> è¡¨ç¤ºç›¸æœºæ¨¡å‹ï¼ˆå¯ä»¥æ˜¯ <code>SIMPLE_PINHOLE</code>ã€<code>OPENCV</code> ç­‰ï¼‰ã€‚</li><li><code>1500.0</code> æ˜¯ç„¦è· <code>fx</code>ã€‚</li><li><code>960.0 540.0</code> æ˜¯ä¸»ç‚¹åæ ‡ <code>(cx, cy)</code>ã€‚</li></ul><hr><h3 id=2-imagestxt><strong>(2) images.txt</strong></h3><p>å­˜å‚¨ <strong>ç›¸æœºå¤–å‚ï¼ˆä½å§¿ R, Tï¼‰</strong> åŠ 3D-2D è§‚æµ‹å…³ç³»ï¼Œæ¯ä¸ªç›¸æœºä¸¤è¡Œï¼š</p><pre tabindex=0><code>&lt;image_id&gt; &lt;qw&gt; &lt;qx&gt; &lt;qy&gt; &lt;qz&gt; &lt;tx&gt; &lt;ty&gt; &lt;tz&gt; &lt;camera_id&gt; &lt;image_name&gt;
&lt;point2D_x1&gt; &lt;point2D_y1&gt; &lt;point3D_id1&gt; &lt;point2D_x2&gt; &lt;point2D_y2&gt; &lt;point3D_id2&gt; ...
</code></pre><p>ç¤ºä¾‹ï¼š</p><pre tabindex=0><code>1 0.998 -0.002 0.055 -0.015 0.2 0.1 1.5 1 img_001.jpg
50.5 30.2 10  120.3 60.7 11  ...
</code></pre><ul><li><code>qw, qx, qy, qz</code> æ˜¯å››å…ƒæ•°ï¼ˆæ—‹è½¬çŸ©é˜µï¼‰ã€‚</li><li><code>tx, ty, tz</code> æ˜¯å¹³ç§»å‘é‡ã€‚</li><li><code>point2D_x, point2D_y</code> æ˜¯è¯¥å›¾åƒä¸Šçš„ç‰¹å¾ç‚¹åƒç´ åæ ‡ã€‚</li><li><code>point3D_id</code> æ˜¯ç‚¹äº‘ä¸­å¯¹åº”çš„ 3D ç‚¹ IDï¼ˆå¦‚æœ <code>1</code>ï¼Œè¡¨ç¤ºæœªåŒ¹é…åˆ° 3D ç‚¹ï¼‰ã€‚</li></ul><hr><h3 id=3-points3dtxt><strong>(3) points3D.txt</strong></h3><p>å­˜å‚¨ <strong>3D ç‚¹åæ ‡ã€é¢œè‰²ã€é‡æŠ•å½±è¯¯å·®åŠè§‚æµ‹ä¿¡æ¯</strong>ï¼š</p><pre tabindex=0><code>&lt;point3D_id&gt; &lt;X&gt; &lt;Y&gt; &lt;Z&gt; &lt;R&gt; &lt;G&gt; &lt;B&gt; &lt;error&gt; &lt;track&gt;
</code></pre><p>ç¤ºä¾‹ï¼š</p><pre tabindex=0><code>10 1.23 2.34 3.45 255 0 0 0.5  1 23  2 15  3 7
</code></pre><ul><li><code>10</code>ï¼šç‚¹ ID</li><li><code>1.23 2.34 3.45</code>ï¼š3D ä¸–ç•Œåæ ‡</li><li><code>255 0 0</code>ï¼šRGB é¢œè‰²</li><li><code>0.5</code>ï¼šé‡æŠ•å½±è¯¯å·®</li><li><code>1 23 2 15 3 7</code>ï¼šè¯¥ç‚¹è¢« <code>image_id=1</code> çš„ç¬¬ <code>23</code> ä¸ªå…³é”®ç‚¹è§‚æµ‹åˆ°ï¼Œ<code>image_id=2</code> çš„ <code>15</code> å·å…³é”®ç‚¹è§‚æµ‹åˆ°ï¼Œä¾æ­¤ç±»æ¨ã€‚</li></ul><hr><h2 id=-3-ply-æ ¼å¼å¯è§†åŒ–ç”¨><strong>ğŸ“‚ 3. PLY æ ¼å¼ï¼ˆå¯è§†åŒ–ç”¨ï¼‰</strong></h2><p>å¦‚æœä½ æƒ³ç”¨ <strong>MeshLab</strong> æˆ– <strong>Open3D</strong> å¯è§†åŒ–ç‚¹äº‘ï¼Œå¯ä»¥å¯¼å‡º <code>.ply</code>ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>colmap model_converter --input_path sparse/0 --output_path sparse/pointcloud.ply --output_type PLY
</span></span></code></pre></div><p>è¯¥æ–‡ä»¶åŒ…å«ï¼š</p><ul><li>3D åæ ‡ (<code>x, y, z</code>)</li><li>é¢œè‰² (<code>r, g, b</code>)</li></ul><p><strong>ä½¿ç”¨ Open3D è¯»å–å¹¶å¯è§†åŒ–ï¼š</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>open3d</span> <span class=k>as</span> <span class=nn>o3d</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>pcd</span> <span class=o>=</span> <span class=n>o3d</span><span class=o>.</span><span class=n>io</span><span class=o>.</span><span class=n>read_point_cloud</span><span class=p>(</span><span class=s2>&#34;sparse/pointcloud.ply&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>o3d</span><span class=o>.</span><span class=n>visualization</span><span class=o>.</span><span class=n>draw_geometries</span><span class=p>([</span><span class=n>pcd</span><span class=p>])</span>
</span></span></code></pre></div><hr><h2 id=-æ€»ç»“><strong>ğŸ’¡ æ€»ç»“</strong></h2><table><thead><tr><th>æ–‡ä»¶å</th><th>ä½œç”¨</th><th>å¯è¯»æ€§</th></tr></thead><tbody><tr><td><code>cameras.bin</code> / <code>cameras.txt</code></td><td>å­˜å‚¨ç›¸æœºçš„å†…å‚</td><td>ğŸ“œ æ˜“è¯»ï¼ˆTXTï¼‰</td></tr><tr><td><code>images.bin</code> / <code>images.txt</code></td><td>å­˜å‚¨ç›¸æœºä½å§¿ï¼ˆR, Tï¼‰åŠ 3D-2D è§‚æµ‹å…³ç³»</td><td>ğŸ“œ å¤æ‚ä½†å¯è¯»</td></tr><tr><td><code>points3D.bin</code> / <code>points3D.txt</code></td><td>å­˜å‚¨ 3D ç‚¹äº‘åŠé¢œè‰²ã€é‡æŠ•å½±è¯¯å·®ç­‰</td><td>ğŸ“œ é‡è¦</td></tr><tr><td><code>pointcloud.ply</code></td><td>PLY æ ¼å¼çš„ç‚¹äº‘æ–‡ä»¶ï¼ˆå¯è§†åŒ–ï¼‰</td><td>ğŸ“Œ æ–¹ä¾¿å¯è§†åŒ–</td></tr></tbody></table><p>å¦‚æœä½ éœ€è¦è§£æ <code>.bin</code>ï¼Œå¯ä»¥ç”¨ Python è¯»å–ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>colmap_read_model</span> <span class=k>as</span> <span class=nn>read_model</span>  <span class=c1># éœ€è¦ colmap_read_model.pyï¼ˆå¯åœ¨ COLMAP GitHub æ‰¾åˆ°ï¼‰</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cameras</span><span class=p>,</span> <span class=n>images</span><span class=p>,</span> <span class=n>points3D</span> <span class=o>=</span> <span class=n>read_model</span><span class=o>.</span><span class=n>read_model</span><span class=p>(</span><span class=s2>&#34;sparse/0&#34;</span><span class=p>,</span> <span class=n>ext</span><span class=o>=</span><span class=s2>&#34;.bin&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Number of cameras:&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>cameras</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Number of images:&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>images</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Number of 3D points:&#34;</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=n>points3D</span><span class=p>))</span>
</span></span></code></pre></div><p>å¦‚æœä½ æœ‰æ›´å…·ä½“çš„é—®é¢˜ï¼Œæ¯”å¦‚å¦‚ä½•è§£æ <code>.bin</code> æ–‡ä»¶æˆ–è€…è½¬æ¢å…¶ä»–æ ¼å¼ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ï¼ ğŸš€</p><h3 id=4å¤–å‚è¡¨ç¤ºå½¢å¼>4ã€å¤–å‚è¡¨ç¤ºå½¢å¼</h3><p>åœ¨ COLMAP ä¸­ï¼Œå¤–å‚ï¼ˆå¤–éƒ¨å‚æ•°ï¼Œextrinsicsï¼‰ç”¨äºæè¿°ç›¸æœºåœ¨ä¸‰ç»´ç©ºé—´ä¸­çš„å§¿æ€ã€‚COLMAP ä½¿ç”¨ <strong>ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»çš„å˜æ¢</strong>ï¼Œå¹¶é‡‡ç”¨ <strong>å››å…ƒæ•° + å¹³ç§»å‘é‡</strong> è¿›è¡Œå­˜å‚¨ã€‚</p><hr><h3 id=1-colmap-å¤–å‚çš„å­˜å‚¨æ ¼å¼><strong>1. COLMAP å¤–å‚çš„å­˜å‚¨æ ¼å¼</strong></h3><p>q=qw+qxi+qyj+qzk ï¼ˆw,x,y,zé¡ºåºï¼‰</p><p>COLMAP çš„å¤–å‚ä¸€èˆ¬å­˜å‚¨åœ¨ <strong><code>cameras.txt</code></strong>ï¼ˆç›¸æœºå‚æ•°ï¼‰ã€<strong><code>images.txt</code></strong>ï¼ˆå¤–å‚ï¼‰ æˆ– <strong><code>images.bin</code></strong>ï¼ˆäºŒè¿›åˆ¶æ ¼å¼ï¼‰æ–‡ä»¶ä¸­ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><pre tabindex=0><code>IMAGE_ID QW QX QY QZ TX TY TZ CAMERA_ID NAME
</code></pre><p>æ¯ä¸€è¡Œè¡¨ç¤ºä¸€å¼ å›¾åƒçš„å¤–å‚ï¼š</p><ul><li><code>IMAGE_ID</code>ï¼šå›¾åƒçš„ ID</li><li><code>QW QX QY QZ</code>ï¼šè¡¨ç¤º <strong>æ—‹è½¬ï¼ˆå››å…ƒæ•°ï¼‰</strong>ï¼Œç”¨äºæè¿°ç›¸æœºå§¿æ€</li><li><code>TX TY TZ</code>ï¼šè¡¨ç¤º <strong>å¹³ç§»å‘é‡</strong>ï¼ˆç›¸æœºåœ¨ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®ï¼‰</li><li><code>CAMERA_ID</code>ï¼šç›¸æœºçš„ IDï¼ˆä¸ <code>cameras.txt</code> å…³è”ï¼‰</li><li><code>NAME</code>ï¼šå›¾åƒæ–‡ä»¶å</li></ul><hr><h3 id=2-å¤–å‚çš„æ•°å­¦å«ä¹‰><strong>2. å¤–å‚çš„æ•°å­¦å«ä¹‰</strong></h3><p>COLMAP é‡‡ç”¨ <strong>ä¸–ç•Œåæ ‡ç³» â†’ ç›¸æœºåæ ‡ç³»</strong> çš„å˜æ¢ï¼š</p><p>Xc=Râ‹…Xw+TX_c = R \cdot X_w + T</p><p>å…¶ä¸­ï¼š</p><ul><li>RR æ˜¯æ—‹è½¬çŸ©é˜µï¼Œç”±å››å…ƒæ•°è½¬æ¢å¾—åˆ°</li><li>T=(TX,TY,TZ)T = (TX, TY, TZ) æ˜¯å¹³ç§»å‘é‡</li><li>XwX_w æ˜¯ä¸–ç•Œåæ ‡ç³»ä¸­çš„ç‚¹</li><li>XcX_c æ˜¯ç›¸æœºåæ ‡ç³»ä¸­çš„ç‚¹</li></ul><p>å¦‚æœéœ€è¦ç›¸æœºçš„ <strong>ä½å§¿ï¼ˆä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®å’Œæœå‘ï¼‰</strong>ï¼Œå¯ä»¥è®¡ç®— <strong>ç›¸æœºä¸­å¿ƒ C</strong>ï¼š</p><p>C=âˆ’RTâ‹…TC = -R^T \cdot T</p><p>å…¶ä¸­ï¼š</p><ul><li>RTR^T æ˜¯æ—‹è½¬çŸ©é˜µçš„è½¬ç½®</li><li>è®¡ç®—åå¾—åˆ°çš„æ˜¯ç›¸æœºåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ä¸­å¿ƒä½ç½®</li></ul><hr><h3 id=3-ä»-colmap-æå–å¤–å‚><strong>3. ä» COLMAP æå–å¤–å‚</strong></h3><p>å¦‚æœæƒ³å°† COLMAP æä¾›çš„ <strong>å››å…ƒæ•°+å¹³ç§»å‘é‡</strong> è½¬æ¢ä¸º <strong>æ—‹è½¬çŸ©é˜µ R å’Œç›¸æœºä¸­å¿ƒ C</strong>ï¼Œå¯ä»¥ä½¿ç”¨ Python ä»£ç ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span> <span class=k>as</span> <span class=nn>np</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>scipy.spatial.transform</span> <span class=kn>import</span> <span class=n>Rotation</span> <span class=k>as</span> <span class=n>R</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å‡è®¾å¤–å‚æ•°æ®</span>
</span></span><span class=line><span class=cl><span class=n>qw</span><span class=p>,</span> <span class=n>qx</span><span class=p>,</span> <span class=n>qy</span><span class=p>,</span> <span class=n>qz</span> <span class=o>=</span> <span class=mf>0.707</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.707</span><span class=p>,</span> <span class=mf>0.0</span>  <span class=c1># å››å…ƒæ•°</span>
</span></span><span class=line><span class=cl><span class=n>tx</span><span class=p>,</span> <span class=n>ty</span><span class=p>,</span> <span class=n>tz</span> <span class=o>=</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>,</span> <span class=mf>3.0</span>  <span class=c1># å¹³ç§»å‘é‡</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 1. å››å…ƒæ•°è½¬æ—‹è½¬çŸ©é˜µ</span>
</span></span><span class=line><span class=cl><span class=n>rot</span> <span class=o>=</span> <span class=n>R</span><span class=o>.</span><span class=n>from_quat</span><span class=p>([</span><span class=n>qx</span><span class=p>,</span> <span class=n>qy</span><span class=p>,</span> <span class=n>qz</span><span class=p>,</span> <span class=n>qw</span><span class=p>])</span><span class=o>.</span><span class=n>as_matrix</span><span class=p>()</span>  <span class=c1># SciPy éœ€è¦ [qx, qy, qz, qw]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. è®¡ç®—ç›¸æœºä¸­å¿ƒ</span>
</span></span><span class=line><span class=cl><span class=n>t</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span><span class=n>tx</span><span class=p>,</span> <span class=n>ty</span><span class=p>,</span> <span class=n>tz</span><span class=p>])</span><span class=o>.</span><span class=n>reshape</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>camera_center</span> <span class=o>=</span> <span class=o>-</span><span class=n>rot</span><span class=o>.</span><span class=n>T</span> <span class=o>@</span> <span class=n>t</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;æ—‹è½¬çŸ©é˜µ R:</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>rot</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ç›¸æœºä¸­å¿ƒ C:</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>,</span> <span class=n>camera_center</span><span class=o>.</span><span class=n>flatten</span><span class=p>())</span>
</span></span></code></pre></div><hr><h3 id=4-è§£æäºŒè¿›åˆ¶><strong>4. è§£æäºŒè¿›åˆ¶ <code>images.bin</code></strong></h3><p>COLMAP ä¹Ÿæ”¯æŒ <code>images.bin</code> æ ¼å¼ï¼Œå¦‚æœæƒ³è§£æï¼Œå¯ä»¥ç”¨ <code>colmap.bin_to_txt</code> æˆ–è€… Pythonï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>struct</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>read_colmap_binary_images</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=s2>&#34;rb&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>num_images</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>unpack</span><span class=p>(</span><span class=s2>&#34;&lt;Q&#34;</span><span class=p>,</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>8</span><span class=p>))[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>images</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>num_images</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=n>data</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>unpack</span><span class=p>(</span><span class=s2>&#34;&lt;idddddddi&#34;</span><span class=p>,</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>64</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>image_id</span><span class=p>,</span> <span class=n>qw</span><span class=p>,</span> <span class=n>qx</span><span class=p>,</span> <span class=n>qy</span><span class=p>,</span> <span class=n>qz</span><span class=p>,</span> <span class=n>tx</span><span class=p>,</span> <span class=n>ty</span><span class=p>,</span> <span class=n>tz</span><span class=p>,</span> <span class=n>camera_id</span> <span class=o>=</span> <span class=n>data</span>
</span></span><span class=line><span class=cl>            <span class=n>name_length</span> <span class=o>=</span> <span class=n>struct</span><span class=o>.</span><span class=n>unpack</span><span class=p>(</span><span class=s2>&#34;&lt;I&#34;</span><span class=p>,</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>4</span><span class=p>))[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>name</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>name_length</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&#34;utf-8&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>images</span><span class=p>[</span><span class=n>image_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>(</span><span class=n>qw</span><span class=p>,</span> <span class=n>qx</span><span class=p>,</span> <span class=n>qy</span><span class=p>,</span> <span class=n>qz</span><span class=p>,</span> <span class=n>tx</span><span class=p>,</span> <span class=n>ty</span><span class=p>,</span> <span class=n>tz</span><span class=p>,</span> <span class=n>camera_id</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>images</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>images</span> <span class=o>=</span> <span class=n>read_colmap_binary_images</span><span class=p>(</span><span class=s2>&#34;images.bin&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>images</span><span class=p>)</span>
</span></span></code></pre></div><hr><h3 id=æ€»ç»“><strong>æ€»ç»“</strong></h3><ul><li><p><strong>COLMAP é‡‡ç”¨å››å…ƒæ•° + å¹³ç§»å‘é‡å­˜å‚¨å¤–å‚</strong>ã€‚</p></li><li><p><strong>å¤–å‚è¡¨ç¤ºçš„æ˜¯ä¸–ç•Œåæ ‡ç³»åˆ°ç›¸æœºåæ ‡ç³»çš„å˜æ¢</strong>ã€‚</p></li><li><p><strong>å››å…ƒæ•°å¯ä»¥è½¬æ¢ä¸ºæ—‹è½¬çŸ©é˜µ R</strong>ï¼Œç›¸æœºä¸­å¿ƒå¯ä»¥é€šè¿‡ è®¡ç®—ã€‚</p><p>C=âˆ’RTTC = -R^T T</p></li><li><p><strong>å¯ä»¥è§£æ <code>images.txt</code> æˆ– <code>images.bin</code> ä»¥è·å–å¤–å‚</strong>ã€‚</p></li></ul><p>ä½ æ˜¯æƒ³è¦è½¬æ¢å¤–å‚æ ¼å¼ï¼Œè¿˜æ˜¯è¦è§£æ <code>images.bin</code>ï¼Ÿ</p><h1 id=meshlab>meshlab</h1><p>ctrl+å·¦é”®é•¿æŒ‰ æ‹–åŠ¨</p><p>ctrl+æ»šè½® æ§åˆ¶ç‚¹æ•°çš„å¢å‡</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2025-04-21</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://fjyu95.github.io/posts/%D1%85%D0%B0%D1%86%D1%803d%D1%89%D0%B7%D0%BD%D1%85%D1%87%D1%87%D1%8F-139e4020f060802d9629dfad7d7f0b5c/ data-title=å¼€æº3dé‡å»ºç³»ç»Ÿ data-hashtags=3d,colmap,opensvm,sfm><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://fjyu95.github.io/posts/%D1%85%D0%B0%D1%86%D1%803d%D1%89%D0%B7%D0%BD%D1%85%D1%87%D1%87%D1%8F-139e4020f060802d9629dfad7d7f0b5c/ data-hashtag=3d><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://fjyu95.github.io/posts/%D1%85%D0%B0%D1%86%D1%803d%D1%89%D0%B7%D0%BD%D1%85%D1%87%D1%87%D1%8F-139e4020f060802d9629dfad7d7f0b5c/ data-title=å¼€æº3dé‡å»ºç³»ç»Ÿ><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://fjyu95.github.io/posts/%D1%85%D0%B0%D1%86%D1%803d%D1%89%D0%B7%D0%BD%D1%85%D1%87%D1%87%D1%8F-139e4020f060802d9629dfad7d7f0b5c/ data-title=å¼€æº3dé‡å»ºç³»ç»Ÿ><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on å¾®åš" data-sharer=weibo data-url=https://fjyu95.github.io/posts/%D1%85%D0%B0%D1%86%D1%803d%D1%89%D0%B7%D0%BD%D1%85%D1%87%D1%87%D1%8F-139e4020f060802d9629dfad7d7f0b5c/ data-title=å¼€æº3dé‡å»ºç³»ç»Ÿ><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/3d/>3d</a>,&nbsp;<a href=/tags/colmap/>Colmap</a>,&nbsp;<a href=/tags/opensvm/>Opensvm</a>,&nbsp;<a href=/tags/sfm/>Sfm</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/3dgs-138e4020f06080e7b9ced1f2074982d5/ class=prev rel=prev title=3DGS><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>3DGS</a>
<a href=/posts/diy%D1%88%D0%B3%D0%B5%D1%86%D1%8C-14fe4020f0608024989ac1aa0736caa5/ class=next rel=next title=DIYè£…æœº>DIYè£…æœº<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2020 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://fjyu95.github.io/ target=_blank>fjyu95</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>