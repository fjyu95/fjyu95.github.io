<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Gitea搭建 - FangjieYu‘s site</title><meta name=Description content="This is my cool site"><meta property="og:url" content="https://fjyu95.github.io/posts/gitea%E6%90%AD%E5%BB%BA/">
<meta property="og:site_name" content="FangjieYu‘s site"><meta property="og:title" content="Gitea搭建"><meta property="og:description" content="gitea搭建"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-11T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-11T00:00:00+00:00"><meta property="article:tag" content="Git"><meta name=twitter:card content="summary"><meta name=twitter:title content="Gitea搭建"><meta name=twitter:description content="gitea搭建"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://fjyu95.github.io/posts/gitea%E6%90%AD%E5%BB%BA/><link rel=prev href=https://fjyu95.github.io/posts/gogs/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Gitea搭建","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/fjyu95.github.io\/posts\/gitea%E6%90%AD%E5%BB%BA\/"},"genre":"posts","keywords":"git","wordcount":1693,"url":"https:\/\/fjyu95.github.io\/posts\/gitea%E6%90%AD%E5%BB%BA\/","datePublished":"2025-04-11T00:00:00+00:00","dateModified":"2025-04-11T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"fjyu95"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="FangjieYu‘s site">fjyu95</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>posts </a><a class=menu-item href=/tags/>tags </a><a class=menu-item href=/categories/>category </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="FangjieYu‘s site">fjyu95</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>posts</a><a class=menu-item href=/tags/ title>tags</a><a class=menu-item href=/categories/ title>category</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Gitea搭建</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://fjyu95.github.io/ title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>fjyu95</a></span>&nbsp;<span class=post-category>included in <a href=/categories/git%E7%AC%94%E8%AE%B0/><i class="far fa-folder fa-fw" aria-hidden=true></i>Git笔记</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2025-04-11>2025-04-11</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1693 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;4 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#文档>文档</a></li><li><a href=#安装二进制>安装（二进制）</a></li><li><a href=#安装指导-gpt>安装指导 gpt</a><ul><li><a href=#-gitea-简介>🧩 Gitea 简介</a></li><li><a href=#-环境准备>🧰 环境准备</a></li><li><a href=#-安装-gitea>🚀 安装 Gitea</a><ul><li><a href=#-第一步创建-gitea-用户>🔧 第一步：创建 Gitea 用户</a></li><li><a href=#-第二步下载-gitea>🔧 第二步：下载 Gitea</a></li><li><a href=#-第三步创建所需目录>🔧 第三步：创建所需目录</a></li><li><a href=#-第四步添加-systemd-服务开机自启>🔧 第四步：添加 Systemd 服务（开机自启）</a></li><li><a href=#-第五步启动服务>🔧 第五步：启动服务</a></li><li><a href=#-第六步访问-web-页面配置>✅ 第六步：访问 Web 页面配置</a></li></ul></li><li><a href=#-可选开放防火墙端口>🌐 可选：开放防火墙端口</a></li><li><a href=#-后续建议>🛡️ 后续建议</a></li><li><a href=#验证-gpg-签名><strong>验证 GPG 签名</strong></a></li></ul></li><li><a href=#faq>FAQ</a><ul><li><a href=#1-默认配置文件位置>1. 默认配置文件位置</a></li><li><a href=#2-3000端口禁止访问>2. 3000端口禁止访问</a><ul><li><a href=#方法一修改-gitea-监听地址><strong>方法一：修改 Gitea 监听地址</strong></a></li><li><a href=#方法二使用防火墙规则推荐组合方案><strong>方法二：使用防火墙规则（推荐组合方案）</strong></a><ul><li><a href=#1-清除原有3000端口规则>1. 清除原有3000端口规则</a></li><li><a href=#2-设置新规则仅允许本机访问>2. 设置新规则（仅允许本机访问）</a></li><li><a href=#3-生效规则>3. 生效规则</a></li></ul></li><li><a href=#方法三nginx-反向代理隔离生产环境推荐><strong>方法三：Nginx 反向代理隔离（生产环境推荐）</strong></a></li><li><a href=#验证配置效果><strong>验证配置效果</strong></a></li><li><a href=#补充安全措施><strong>补充安全措施</strong></a></li></ul></li><li><a href=#3-frp反向代理>3. frp反向代理</a></li><li><a href=#4-nginx反向代理>4. nginx反向代理</a></li><li><a href=#5-frp-vs-nginx>5. frp vs. nginx</a><ul><li><a href=#核心区别对比表><strong>核心区别对比表</strong></a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=文档>文档</h1><p><a href=https://docs.gitea.com/zh-cn/category/installation target=_blank rel="noopener noreffer">https://docs.gitea.com/zh-cn/category/installation</a></p><p><a href=https://dl.gitea.com/gitea/1.23.7/ target=_blank rel="noopener noreffer">https://dl.gitea.com/gitea/1.23.7/</a></p><h1 id=安装二进制>安装（二进制）</h1><p><a href=https://docs.gitea.com/zh-cn/installation/install-from-binary target=_blank rel="noopener noreffer">https://docs.gitea.com/zh-cn/installation/install-from-binary</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 环境准备</span>
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install git wget sqlite3 -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># gitea下载</span>
</span></span><span class=line><span class=cl>wget -O gitea https://dl.gitea.com/gitea/1.23.7/gitea-1.23.7-linux-amd64 <span class=c1># -O write documents to FILE</span>
</span></span><span class=line><span class=cl>wget gitea https://dl.gitea.com/gitea/1.23.7/gitea-1.23.7-linux-amd64.asc
</span></span><span class=line><span class=cl>chmod +x gitea
</span></span><span class=line><span class=cl>sudo cp gitea /usr/local/bin/gitea
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 验证GPG签名[可选]</span>
</span></span><span class=line><span class=cl>gpg --keyserver keys.openpgp.org --recv 7C9E68152594688862D62AF62D9AE806EC1592E2
</span></span><span class=line><span class=cl>gpg --verify gitea-1.23.7-linux-amd64.asc gitea
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建工作路径</span>
</span></span><span class=line><span class=cl>sudo mkdir -p /var/lib/gitea/<span class=o>{</span>custom,data,log<span class=o>}</span>
</span></span><span class=line><span class=cl>sudo chown -R git:git /var/lib/gitea/
</span></span><span class=line><span class=cl>sudo chmod -R <span class=m>750</span> /var/lib/gitea/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo mkdir /etc/gitea
</span></span><span class=line><span class=cl>sudo chown root:git /etc/gitea
</span></span><span class=line><span class=cl>sudo chmod <span class=m>770</span> /etc/gitea
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 网页配置完成后执行</span>
</span></span><span class=line><span class=cl>chmod <span class=m>750</span> /etc/gitea
</span></span><span class=line><span class=cl>chmod <span class=m>640</span> /etc/gitea/app.ini
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建 Gitea 用户</span>
</span></span><span class=line><span class=cl>sudo adduser <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>   --system <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>   --shell /bin/bash <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>   --gecos <span class=s1>&#39;Git Version Control&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>   --group <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>   --disabled-password <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>   --home /home/git <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>   git
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 添加 Systemd 服务（开机自启）   </span>
</span></span><span class=line><span class=cl>sudo tee /etc/systemd/system/gitea.service &gt; /dev/null <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>[Unit]
</span></span></span><span class=line><span class=cl><span class=s>Description=Gitea (Git with a cup of tea)
</span></span></span><span class=line><span class=cl><span class=s>After=syslog.target
</span></span></span><span class=line><span class=cl><span class=s>After=network.target
</span></span></span><span class=line><span class=cl><span class=s>Requires=network.target
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>[Service]
</span></span></span><span class=line><span class=cl><span class=s>RestartSec=2s
</span></span></span><span class=line><span class=cl><span class=s>Type=simple
</span></span></span><span class=line><span class=cl><span class=s>User=git
</span></span></span><span class=line><span class=cl><span class=s>Group=git
</span></span></span><span class=line><span class=cl><span class=s>WorkingDirectory=/var/lib/gitea/
</span></span></span><span class=line><span class=cl><span class=s>ExecStart=/usr/local/bin/gitea web --config /etc/gitea/app.ini
</span></span></span><span class=line><span class=cl><span class=s>Restart=always
</span></span></span><span class=line><span class=cl><span class=s>Environment=USER=git HOME=/home/git GITEA_WORK_DIR=/var/lib/gitea
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>[Install]
</span></span></span><span class=line><span class=cl><span class=s>WantedBy=multi-user.target
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 启动服务</span>
</span></span><span class=line><span class=cl>sudo systemctl daemon-reload
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> --now gitea
</span></span><span class=line><span class=cl>sudo systemctl status gitea  <span class=c1># 检查服务状态</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 访问 Web 页面配置</span>
</span></span><span class=line><span class=cl>打开浏览器访问：
</span></span><span class=line><span class=cl>📎 http://&lt;你的服务器IP&gt;:3000
</span></span><span class=line><span class=cl>/etc/gitea/app.ini <span class=c1># 配置文件默认路径</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 可选：开放防火墙端口</span>
</span></span><span class=line><span class=cl>sudo ufw allow <span class=m>3000</span> <span class=c1># 或放在 Nginx 后面使用 80/443</span>
</span></span><span class=line><span class=cl>sudo ufw status
</span></span><span class=line><span class=cl>sudo systemctl restart gitea <span class=c1># 重启 Gitea	</span>
</span></span></code></pre></div><h1 id=安装指导-gpt>安装指导 gpt</h1><p>下面是在 <strong>Ubuntu 上部署 Gitea（私有 Git 平台）</strong> 的超清晰步骤，轻量好用，适合个人和小团队，几十 MB 就能跑，几分钟搞定！💻🚀</p><hr><h2 id=-gitea-简介>🧩 Gitea 简介</h2><ul><li>类似 GitHub，支持私有仓库、Web 界面、SSH/HTTP 访问、权限控制</li><li>极轻量（一个二进制文件），超适合自用</li><li>官网：<a href=https://gitea.io/ target=_blank rel="noopener noreffer">https://gitea.io</a></li></ul><hr><h2 id=-环境准备>🧰 环境准备</h2><p>建议系统：Ubuntu 20.04+</p><p>你只需要安装以下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install git wget sqlite3 -y
</span></span></code></pre></div><blockquote><p>默认用 SQLite 存数据库（轻量），也支持 MySQL / PostgreSQL。</p></blockquote><hr><h2 id=-安装-gitea>🚀 安装 Gitea</h2><h3 id=-第一步创建-gitea-用户>🔧 第一步：创建 Gitea 用户</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo adduser <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --system <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --shell /bin/bash <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --gecos <span class=s1>&#39;Git Version Control&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --group <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --disabled-password <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --home /home/git <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  git
</span></span></code></pre></div><hr><h3 id=-第二步下载-gitea>🔧 第二步：下载 Gitea</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget -O gitea https://dl.gitea.io/gitea/latest/gitea-linux-amd64
</span></span><span class=line><span class=cl>chmod +x gitea
</span></span><span class=line><span class=cl>sudo mv gitea /usr/local/bin/gitea
</span></span></code></pre></div><hr><h3 id=-第三步创建所需目录>🔧 第三步：创建所需目录</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo mkdir -p /var/lib/gitea/<span class=o>{</span>custom,data,log<span class=o>}</span>
</span></span><span class=line><span class=cl>sudo chown -R git:git /var/lib/gitea/
</span></span><span class=line><span class=cl>sudo chmod -R <span class=m>750</span> /var/lib/gitea/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>sudo mkdir /etc/gitea
</span></span><span class=line><span class=cl>sudo chown root:git /etc/gitea
</span></span><span class=line><span class=cl>sudo chmod <span class=m>770</span> /etc/gitea
</span></span></code></pre></div><hr><h3 id=-第四步添加-systemd-服务开机自启>🔧 第四步：添加 Systemd 服务（开机自启）</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo tee /etc/systemd/system/gitea.service &gt; /dev/null <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>[Unit]
</span></span></span><span class=line><span class=cl><span class=s>Description=Gitea (Git with a cup of tea)
</span></span></span><span class=line><span class=cl><span class=s>After=syslog.target
</span></span></span><span class=line><span class=cl><span class=s>After=network.target
</span></span></span><span class=line><span class=cl><span class=s>Requires=network.target
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>[Service]
</span></span></span><span class=line><span class=cl><span class=s>RestartSec=2s
</span></span></span><span class=line><span class=cl><span class=s>Type=simple
</span></span></span><span class=line><span class=cl><span class=s>User=git
</span></span></span><span class=line><span class=cl><span class=s>Group=git
</span></span></span><span class=line><span class=cl><span class=s>WorkingDirectory=/var/lib/gitea/
</span></span></span><span class=line><span class=cl><span class=s>ExecStart=/usr/local/bin/gitea web --config /etc/gitea/app.ini
</span></span></span><span class=line><span class=cl><span class=s>Restart=always
</span></span></span><span class=line><span class=cl><span class=s>Environment=USER=git HOME=/home/git GITEA_WORK_DIR=/var/lib/gitea
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>[Install]
</span></span></span><span class=line><span class=cl><span class=s>WantedBy=multi-user.target
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span></code></pre></div><hr><h3 id=-第五步启动服务>🔧 第五步：启动服务</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl daemon-reexec
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> --now gitea
</span></span></code></pre></div><hr><h3 id=-第六步访问-web-页面配置>✅ 第六步：访问 Web 页面配置</h3><p>打开浏览器访问：</p><p>📎 <code>http://&lt;你的服务器IP>:3000</code></p><p>首次进入安装界面，填写：</p><ul><li>数据库：SQLite（默认）</li><li>仓库路径：<code>/var/lib/gitea/data/gitea-repositories</code></li><li>应用路径：<code>/usr/local/bin/gitea</code></li><li>配置文件：<code>/etc/gitea/app.ini</code></li><li>管理员账户：设置你自己的用户名和密码</li></ul><hr><h2 id=-可选开放防火墙端口>🌐 可选：开放防火墙端口</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow <span class=m>3000</span>
</span></span></code></pre></div><p>或放在 Nginx 后面使用 80/443</p><hr><h2 id=-后续建议>🛡️ 后续建议</h2><table><thead><tr><th>操作</th><th>命令</th></tr></thead><tbody><tr><td>重启 Gitea</td><td><code>sudo systemctl restart gitea</code></td></tr><tr><td>查看日志</td><td><code>journalctl -u gitea -f</code></td></tr><tr><td>Gitea 配置文件</td><td><code>/etc/gitea/app.ini</code></td></tr><tr><td>仓库存储路径</td><td><code>/var/lib/gitea/data/gitea-repositories</code></td></tr></tbody></table><hr><h2 id=验证-gpg-签名><strong>验证 GPG 签名</strong></h2><p><strong>因notion导出格式问题，待续&mldr;</strong></p><h1 id=faq>FAQ</h1><h2 id=1-默认配置文件位置>1. 默认配置文件位置</h2><p>/etc/gitea/app.ini</p><h2 id=2-3000端口禁止访问>2. 3000端口禁止访问</h2><p>以下是限制 Gitea 3000 端口仅允许本地访问的解决方案：</p><hr><h3 id=方法一修改-gitea-监听地址><strong>方法一：修改 Gitea 监听地址</strong></h3><ol><li>编辑配置文件</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo nano /etc/gitea/app.ini
</span></span></code></pre></div><ol><li>修改服务器配置段</li></ol><pre tabindex=0><code>[server]
HTTP_ADDR = 127.0.0.1  # 原为 0.0.0.0
HTTP_PORT = 3000
</code></pre><ol><li>重启服务生效</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo systemctl restart gitea
</span></span></code></pre></div><hr><h3 id=方法二使用防火墙规则推荐组合方案><strong>方法二：使用防火墙规则（推荐组合方案）</strong></h3><h4 id=1-清除原有3000端口规则>1. 清除原有3000端口规则</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw delete allow <span class=m>3000</span>
</span></span></code></pre></div><h4 id=2-设置新规则仅允许本机访问>2. 设置新规则（仅允许本机访问）</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw allow from 127.0.0.1 to any port <span class=m>3000</span>
</span></span><span class=line><span class=cl>sudo ufw deny <span class=m>3000</span>  <span class=c1># 明确拒绝其他访问</span>
</span></span></code></pre></div><h4 id=3-生效规则>3. 生效规则</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw reload
</span></span></code></pre></div><hr><h3 id=方法三nginx-反向代理隔离生产环境推荐><strong>方法三：Nginx 反向代理隔离（生产环境推荐）</strong></h3><ol><li>修改 Nginx 配置</li></ol><pre tabindex=0><code>server {
    listen 80;
    server_name localhost;  # 仅限本机访问

    location / {
        proxy_pass &lt;http://127.0.0.1:3000&gt;;
        # 添加IP白名单（可选）
        allow 192.168.1.100;  # 允许指定IP
        deny all;
    }
}
</code></pre><ol><li>禁用原3000端口外部访问</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo ufw deny <span class=m>3000</span>
</span></span></code></pre></div><hr><h3 id=验证配置效果><strong>验证配置效果</strong></h3><ol><li>本地访问测试</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl 127.0.0.1:3000  <span class=c1># 应该正常响应</span>
</span></span></code></pre></div><ol><li>局域网访问测试（其他机器）</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl 你的服务器内网IP:3000  <span class=c1># 应该返回连接拒绝</span>
</span></span></code></pre></div><hr><h3 id=补充安全措施><strong>补充安全措施</strong></h3><ol><li>检查监听状态</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ss -tulpn <span class=p>|</span> grep <span class=m>3000</span>
</span></span><span class=line><span class=cl><span class=c1># 正确应显示：tcp LISTEN 0 128 127.0.0.1:3000</span>
</span></span></code></pre></div><ol><li>永久关闭 IP 转发（增强隔离）</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo sysctl -w net.ipv4.ip_forward<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;net.ipv4.ip_forward = 0&#34;</span> <span class=p>|</span> sudo tee -a /etc/sysctl.conf
</span></span></code></pre></div><hr><p><strong>注意事项</strong>：</p><ol><li>如果使用 SSH 端口转发访问，保持22端口开放</li><li>修改配置前建议备份 <code>app.ini</code> 文件</li><li>组合使用「方法一 + 方法二」能达到最佳隔离效果</li></ol><p>以上方案可使 Gitea 服务仅限本机访问，同时可通过 Nginx 配置选择性开放外部访问权限。</p><h2 id=3-frp反向代理>3. frp反向代理</h2><p>待续&mldr;</p><h2 id=4-nginx反向代理>4. nginx反向代理</h2><p>待续&mldr;</p><h2 id=5-frp-vs-nginx>5. frp vs. nginx</h2><h3 id=核心区别对比表><strong>核心区别对比表</strong></h3><table><thead><tr><th>特性</th><th>Nginx 反向代理</th><th>frp 反向代理</th></tr></thead><tbody><tr><td><strong>主要定位</strong></td><td>Web 服务器专用代理</td><td>内网穿透/多协议通用代理</td></tr><tr><td><strong>典型场景</strong></td><td>公网服务器直接暴露服务</td><td>内网服务通过公网中转暴露</td></tr><tr><td><strong>协议支持</strong></td><td>专注 HTTP/HTTPS/WebSocket</td><td>支持 TCP/UDP/HTTP/HTTPS 等多协议</td></tr><tr><td><strong>SSL 终端</strong></td><td>原生支持（Let&rsquo;s Encrypt 集成）</td><td>依赖客户端配置或外部证书</td></tr><tr><td><strong>性能优化</strong></td><td>连接池、缓存、Gzip 等高级优化</td><td>基础转发，无 Web 专用优化</td></tr><tr><td><strong>配置复杂度</strong></td><td>较高（需熟悉 Nginx 语法）</td><td>较低（INI 格式简单配置）</td></tr><tr><td><strong>安全性</strong></td><td>WAF 能力、访问控制、速率限制</td><td>依赖传输层加密（如 TLS）</td></tr><tr><td><strong>部署成本</strong></td><td>需公网服务器</td><td>需要公网服务器作为中转节点</td></tr></tbody></table></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2025-04-11</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://fjyu95.github.io/posts/gitea%E6%90%AD%E5%BB%BA/ data-title=Gitea搭建 data-hashtags=git><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://fjyu95.github.io/posts/gitea%E6%90%AD%E5%BB%BA/ data-hashtag=git><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://fjyu95.github.io/posts/gitea%E6%90%AD%E5%BB%BA/ data-title=Gitea搭建><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://fjyu95.github.io/posts/gitea%E6%90%AD%E5%BB%BA/ data-title=Gitea搭建><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://fjyu95.github.io/posts/gitea%E6%90%AD%E5%BB%BA/ data-title=Gitea搭建><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/git/>Git</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/gogs/ class=prev rel=prev title=gogs><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>gogs</a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2020 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://fjyu95.github.io/ target=_blank>fjyu95</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>