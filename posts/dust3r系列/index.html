<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>DUSt3R系列学习 - FangjieYu‘s site</title><meta name=Description content="This is my cool site"><meta property="og:url" content="https://fjyu95.github.io/posts/dust3r%E7%B3%BB%E5%88%97/">
<meta property="og:site_name" content="FangjieYu‘s site"><meta property="og:title" content="DUSt3R系列学习"><meta property="og:description" content="This is my cool site"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-04-27T00:00:00+00:00"><meta property="article:tag" content="3d"><meta property="article:tag" content="Colmap"><meta property="article:tag" content="DUSt3R"><meta property="article:tag" content="VGGT"><meta name=twitter:card content="summary"><meta name=twitter:title content="DUSt3R系列学习"><meta name=twitter:description content="This is my cool site"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://fjyu95.github.io/posts/dust3r%E7%B3%BB%E5%88%97/><link rel=prev href=https://fjyu95.github.io/posts/diy%E8%A3%85%E6%9C%BA/><link rel=next href=https://fjyu95.github.io/posts/rgbd%E7%9B%B8%E6%9C%BA/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"DUSt3R系列学习","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/fjyu95.github.io\/posts\/dust3r%E7%B3%BB%E5%88%97\/"},"genre":"posts","keywords":"3d, colmap, DUSt3R, VGGT","wordcount":10689,"url":"https:\/\/fjyu95.github.io\/posts\/dust3r%E7%B3%BB%E5%88%97\/","datePublished":"2024-12-16T00:00:00+00:00","dateModified":"2025-04-27T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"fjyu95"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="FangjieYu‘s site">fjyu95</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>posts </a><a class=menu-item href=/tags/>tags </a><a class=menu-item href=/categories/>category </a><a class=menu-item href=/about/>about </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="FangjieYu‘s site">fjyu95</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/ title>posts</a><a class=menu-item href=/tags/ title>tags</a><a class=menu-item href=/categories/ title>category</a><a class=menu-item href=/about/ title>about</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">DUSt3R系列学习</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://fjyu95.github.io/ title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>fjyu95</a></span>&nbsp;<span class=post-category>included in <a href=/categories/%E4%B8%89%E7%BB%B4%E9%87%8D%E5%BB%BA/><i class="far fa-folder fa-fw" aria-hidden=true></i>三维重建</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2024-12-16>2024-12-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;10689 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;22 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#dust3r>DUSt3R</a><ul><li><a href=#整体理解>整体理解</a></li><li><a href=#croco网络>croco网络</a><ul><li><a href=#技术特点>技术特点</a></li><li><a href=#应用场景>应用场景</a></li><li><a href=#项目结构>项目结构</a></li><li><a href=#使用方法>使用方法</a></li></ul></li><li><a href=#pnp问题的输入>pnp问题的输入</a></li><li><a href=#dpt>DPT</a></li><li><a href=#点图>点图</a></li><li><a href=#点图vs点云>点图vs.点云</a><ul><li><a href=#点云point-clouds>点云（Point Clouds）：</a></li><li><a href=#点图point-maps>点图（Point Maps）：</a></li><li><a href=#总结>总结：</a></li></ul></li><li><a href=#hugging-face><strong>Hugging Face</strong></a><ul><li><a href=#hugging-face-的主要组件><strong>Hugging Face 的主要组件</strong></a></li><li><a href=#1-transformers-库><strong>1. Transformers 库</strong></a></li><li><a href=#2-datasets-库><strong>2. Datasets 库</strong></a></li><li><a href=#3-hub><strong>3. Hub</strong></a></li><li><a href=#4-accelerate><strong>4. Accelerate</strong></a></li><li><a href=#5-other-libraries><strong>5. Other Libraries</strong></a></li></ul></li><li><a href=#faq>FAQ</a><ul><li><a href=#1输入是什么几个视图>1、输入是什么，几个视图？</a><ul><li><a href=#dust3r-处理的是图像对>DUST3R 处理的是图像对</a></li><li><a href=#为什么-dust3r-可以处理图像对>为什么 DUST3R 可以处理图像对</a></li><li><a href=#dust3r-与多视角的关系>DUST3R 与多视角的关系</a></li><li><a href=#总结-1>总结</a></li></ul></li><li><a href=#2点图如何理解>2、点图如何理解？</a></li></ul></li></ul></li><li><a href=#nvs>NVS</a><ul><li><ul><li><a href=#基本概念>基本概念：</a></li><li><a href=#技术实现方式>技术实现方式：</a><ul><li><a href=#1-基于图像的合成>1. <strong>基于图像的合成</strong>：</a></li><li><a href=#2-基于深度学习的生成方法>2. <strong>基于深度学习的生成方法</strong>：</a></li><li><a href=#3-基于体积渲染的合成>3. <strong>基于体积渲染的合成</strong>：</a></li><li><a href=#4-基于稀疏稠密点云的重建>4. <strong>基于稀疏/稠密点云的重建</strong>：</a></li></ul></li><li><a href=#关键技术与方法>关键技术与方法：</a><ul><li><a href=#1-神经辐射场-nerf>1. <strong>神经辐射场 (NeRF)</strong></a></li><li><a href=#2-视角变换网络view-synthesis-networks>2. <strong>视角变换网络（View Synthesis Networks）</strong></a></li><li><a href=#3-基于图像配准与几何建模的方法>3. <strong>基于图像配准与几何建模的方法</strong></a></li></ul></li><li><a href=#应用领域>应用领域：</a></li><li><a href=#总结-2>总结</a></li></ul></li></ul></li><li><a href=#mast3r>MASt3R</a></li><li><a href=#monst3r>monst3R</a></li><li><a href=#mv-dust3r>MV-DUSt3R+</a><ul><li><ul><li><a href=#general-comprehension>General Comprehension</a></li><li><a href=#contrast>contrast</a></li><li><a href=#mv-dust3r-相较于-dust3r-的改进与提升>MV-DUST3R+ 相较于 DUST3R 的改进与提升</a></li><li><a href=#总结-3>总结</a></li><li><a href=#faq-1>FAQ</a></li></ul></li></ul></li><li><a href=#fast3r>Fast3R</a><ul><li><a href=#faq-2>FAQ</a></li></ul></li><li><a href=#instantsplat>instantsplat</a><ul><li><a href=#pipeline>pipeline</a><ul><li><a href=#1点云生成>1、点云生成</a></li><li><a href=#2点云转高斯>2、点云转高斯</a></li><li><a href=#3渲染出图及合成视频>3、渲染出图及合成视频</a></li></ul></li><li><a href=#chunked-pcd-align>chunked pcd align</a><ul><li><a href=#merge-input-data-structure>merge input data structure</a></li></ul></li><li><a href=#faq-3>FAQ</a><ul><li><a href=#插值视频生成报错>插值视频生成报错</a></li><li><a href=#分块融合的必要数据>分块融合的必要数据</a></li></ul></li></ul></li><li><a href=#vggt>VGGT</a></li></ul></nav></div></div><div class=content id=content><p>密集无约束三维重建</p><p>Dense and Unconstrained Stereo 3D Reconstruction</p><p>通过一种全新的方法简化几何3D视觉任务，特别是在密集3D重建方面</p><p>实质是结合深度学习技术进行多视图<strong>密集三维重建</strong>。基于ViT架构</p><p>当前理解：通过自定义的dust3r网络解决了3d视觉中核心的关键点匹配问题，通过该深度网络得到了PnP问题的输入（一些2d-3d对应点），并用于后续广泛的3d任务。</p><img src=3d重建发展.png width=75%><h1 id=dust3r>DUSt3R</h1><h2 id=整体理解>整体理解</h2><p>DUSt3R最大的创新点在于它提出了一种新的三维重建框架，该框架在以下几个方面实现了显著的突破：</p><ol><li><strong>无需相机校准信息</strong>：DUSt3R能够在没有任何相机校准信息（包括相机内参和姿态）的情况下进行三维重建。这一点与传统多视图立体重建（MVS）算法不同，后者通常需要这些信息来在三维空间中对齐像素。</li><li><strong>点图映射（Pointmap）概念</strong>：该方法将成对的图像重建问题视为点图的回归问题，从而放宽了传统投影相机模型的严格约束。这种新的点图映射方法不仅统一了单目和双目重建的情况，而且还能够在多图像情况下，通过一个简单的全局对齐策略，将所有成对点图表达在一个共同的参考框架中。</li><li><strong>基于Transformer的网络架构</strong>：DUSt3R的网络架构基于标准的Transformer编码器和解码器构建，这使得模型能够利用强大的预训练模型，并直接提供场景的3D模型和深度信息。</li><li><strong>端到端的3D重建流程</strong>：该方法提供了一个端到端的解决方案，从输入图像直接到三维模型的输出，简化了重建流程，提高了效率和准确性。</li><li><strong>全局对齐策略</strong>：DUSt3R提出了一种简单而有效的全局对齐策略，用于在提供两幅以上图像的情况下，将所有成对点图在一个公共参考系中表示。</li></ol><p>总的来说，DUSt3R的创新之处在于它简化了三维重建的流程，提高了效率和准确性，并且能够在没有相机校准信息的情况下进行重建，这在计算机视觉领域是一个重大的进步。</p><h2 id=croco网络>croco网络</h2><p>CroCo网络是一个创新的自我监督学习模型，主要用于3D视觉任务。<br>这个项目最初源于NeurIPS 2022年的论文《CroCo: 跨视图完成自监督预训练3D视觉任务》，并在ICCV 2023年进行了扩展。<br>CroCo的核心是通过跨视图图像的恢复和完成，为3D视觉任务提供一个强大的预训练框架。</p><h3 id=技术特点>技术特点</h3><ol><li><strong>自我监督学习</strong>：CroCo利用跨视图图像之间的关系进行无监督学习，无需任何额外的标注数据。这种方法使得模型能够通过跨视图图像恢复实现自我监督训练。</li><li><strong>Transformer架构</strong>：CroCo基于Transformer，其编码器对输入图像进行特征提取，而解码器则负责完成遮挡部分的图像重建。</li><li><strong>RoPE位姿嵌入（CroCo v2）</strong>：为了增强位置信息的学习，模型采用了旋转平移嵌入（RoPE），这是一种计算高效的嵌入方法，能更好地捕捉空间关系。</li><li><strong>多阶段预训练</strong>：模型首先在合成数据集上预训练，然后在真实世界数据上进一步微调，以提高泛化能力。</li></ol><h3 id=应用场景>应用场景</h3><ul><li><strong>3D视觉任务</strong>：如立体匹配（找到两个不同视角下相同物体的对应像素）和光流估计（追踪帧间的运动像素）。</li><li><strong>自动驾驶</strong>：通过准确的立体匹配和光流预测，提升自动驾驶系统的环境感知能力。</li><li><strong>机器人导航</strong>：在复杂的室内或室外环境中，帮助机器人理解并导航。</li></ul><h3 id=项目结构>项目结构</h3><p>CroCo项目的目录结构包括多个部分：</p><ul><li><code>assets/</code>：存放项目所需的静态资源文件。</li><li><code>datasets/</code>：存放数据集相关文件，包括数据集的预处理和生成脚本。</li><li><code>models/</code>：存放模型的定义和实现代码。</li><li><code>stereoflow/</code>：存放与立体匹配和光流任务相关的代码。</li><li><code>utils/</code>：存放项目中使用的各种工具函数和辅助代码。</li></ul><p>此外，项目还包括一些关键的脚本和文件，如<code>demo.py</code>用于运行项目的核心功能，<code>pretrain.py</code>用于模型预训练。</p><h3 id=使用方法>使用方法</h3><p>CroCo项目没有明确的配置文件，但可以通过命令行参数或环境变量来配置项目的行为。例如，使用<code>python demo.py</code>命令可以运行项目，并通过参数指定预训练模型的路径、数据集路径和输出结果保存路径等。</p><p>总的来说，CroCo是一个适用于多种3D视觉任务的开源项目，提供了创新的自我监督预训练策略和强大的3D视觉处理能力，非常适合深度学习研究人员和希望提升3D视觉应用性能的开发者使用</p><h2 id=pnp问题的输入>pnp问题的输入</h2><p>PnP（Perspective-n-Point）问题的输入通常包括以下几部分，这些输入可以通过不同的方法获取：</p><ol><li><strong>图像特征点</strong>：<ul><li>这些是从图像中检测到的与真实世界中的某些已知点相对应的像素坐标。通常，这些点是通过以下步骤获取的：<ul><li><strong>特征检测</strong>：使用如SIFT、SURF、ORB、FAST等算法检测图像中的关键点。</li><li><strong>特征匹配</strong>：将检测到的关键点与已知的世界坐标系中的点进行匹配。这可以通过特征描述符的比较来完成，例如使用FLANN或BFMatcher。</li></ul></li></ul></li><li><strong>对应的世界坐标点</strong>：<ul><li>这些是与图像特征点对应的真实世界中的点的三维坐标。获取这些点的方法包括：<ul><li><strong>手工测量</strong>：如果场景中包含已知尺寸的物体（如标定板），可以通过手工测量来获取这些点的世界坐标。</li><li><strong>三维扫描</strong>：使用三维扫描设备（如激光扫描仪）来获取物体的三维模型，并从模型中提取坐标点。</li><li><strong>CAD模型</strong>：如果场景中的物体有CAD模型，可以直接从模型中提取坐标点。</li></ul></li></ul></li><li><strong>相机内参</strong>：<ul><li>这些参数描述了相机的内部属性，如焦距、主点坐标以及镜头畸变参数。获取内参的方法有：<ul><li><strong>相机标定</strong>：使用已知尺寸的标定板（通常是棋盘格图案）进行标定，通过拍摄不同角度的标定板图像来计算内参。</li><li><strong>自标定</strong>：在某些情况下，可以使用自标定技术从图像序列中估计内参，无需使用特定的标定图案。</li></ul></li></ul></li></ol><p>以下是获取PnP问题输入的一般步骤：</p><ol><li><strong>准备标定板</strong>：使用已知尺寸的标定板（通常是棋盘格或圆点图案）。</li><li><strong>拍摄图像</strong>：从不同的视角拍摄标定板的图像。</li><li><strong>检测特征点</strong>：在图像中检测标定板的角点或圆点中心。</li><li><strong>建立对应关系</strong>：将检测到的图像特征点与标定板上的物理点对应起来。对于棋盘格，这通常意味着将每个角点与其在标定板上的三维坐标相对应。（一般是通过算法自动完成的）</li><li><strong>相机标定</strong>：使用检测到的图像点和对应的三维坐标来计算相机的内参和外参。</li><li><strong>求解PnP问题</strong>：一旦有了图像特征点、对应的世界坐标点和相机内参，就可以使用PnP算法来估计相机在拍摄图像时的姿态（旋转和平移）。</li></ol><p>在实际应用中，获取PnP问题输入的过程可能需要精细的操作和校准，以确保准确性。此外，为了提高PnP算法的鲁棒性和准确性，通常会使用多个图像和特征点。</p><h2 id=dpt>DPT</h2><p>Deep Predictive Transformer</p><p>深度预测transformer</p><p><strong>密集预测头 0311</strong></p><h2 id=点图>点图</h2><p>PointMaps是一种数据结构，常用于计算机图形学、地理信息系统（GIS）、机器人导航和3D建模等领域。它是用来存储、管理和查询三维空间中点的集合。以下是对PointMaps的详细解释和如何理解它：</p><ol><li><strong>定义</strong>：<ul><li>PointMaps是一个由点组成的集合，每个点在三维空间中都有其独特的坐标（通常表示为(x, y, z)）。</li></ul></li><li><strong>特点</strong>：<ul><li><strong>空间索引</strong>：为了高效地查询和管理点，PointMaps通常使用空间索引，如KD树、八叉树或R树等数据结构。</li><li><strong>动态性</strong>：PointMaps可以动态地添加或删除点，而不需要重新构建整个数据结构。</li><li><strong>多维度</strong>：虽然通常指的是三维空间中的点，但PointMaps也可以扩展到更高维度的空间。</li></ul></li><li><strong>应用</strong>：<ul><li><strong>3D建模</strong>：在3D建模中，PointMaps可以用来表示物体的表面，尤其是在使用点云数据进行建模时。</li><li><strong>GIS</strong>：在GIS中，PointMaps可以用来表示地理空间中的特定位置，如城市中的地标或监测点。</li><li><strong>机器人导航</strong>：在机器人导航中，PointMaps可以用来表示环境中的障碍物或关键点，帮助机器人规划路径。</li></ul></li><li><strong>如何理解</strong>：<ul><li><strong>直观理解</strong>：可以将PointMaps想象为一个三维空间中的散点图，每个点都有其特定的位置。</li><li><strong>功能理解</strong>：理解PointMaps的关键在于其背后的数据结构和算法，这些结构使得对点的快速检索和操作成为可能。</li><li><strong>应用理解</strong>：通过具体的例子来理解PointMaps的应用场景，如使用PointMaps来构建数字地形模型或进行城市规划设计。</li></ul></li></ol><p>简而言之，PointMaps是一个强大的工具，用于在三维空间中表示和管理点的集合，它的应用广泛，并且在各种技术和科学领域中扮演着重要角色。</p><p>PointMap 作为一种稠密点云的中间表示，帮助 DUST3R 处理场景的几何细节，翻译为点映射可能更好理解。</p><h2 id=点图vs点云>点图vs.点云</h2><p>点图（Point Maps）和点云（Point Clouds）是两个在概念上相似但在应用和细节上有所不同的术语。以下是它们之间的主要区别：</p><h3 id=点云point-clouds>点云（Point Clouds）：</h3><ol><li><strong>定义</strong>：<ul><li>点云是由大量在三维空间中分布的点组成的数据集。这些点通常代表从现实世界中扫描或测量的物理对象的表面。</li></ul></li><li><strong>特性</strong>：<ul><li>点云通常包含大量的点，可以非常详细地表示一个对象或环境的形状和结构。</li><li>点云数据通常是无序的，每个点都是独立的，没有特定的顺序。</li><li>点云可以包含额外的信息，如颜色、强度或其他传感器数据。</li></ul></li><li><strong>应用</strong>：<ul><li>主要用于三维扫描、三维建模、建筑信息模型（BIM）、地形测绘、考古、机器人导航等领域。</li><li>用于创建精确的数字副本或模型，用于设计、分析或记录。</li></ul></li><li><strong>数据管理</strong>：<ul><li>点云数据量大，需要有效的数据管理和处理技术。</li><li>常用的文件格式包括PLY、LAS、PCD等。</li></ul></li></ol><h3 id=点图point-maps>点图（Point Maps）：</h3><ol><li><strong>定义</strong>：<ul><li>点图通常是指一种抽象的数据结构，用于存储和管理空间中的点数据。</li></ul></li><li><strong>特性</strong>：<ul><li>点图可能包含较少的点，它们通常用于表示特定的信息或特征，而不是整个对象的详细结构。</li><li>点图可能是有序的，用于特定的数据表示或计算任务。</li></ul></li><li><strong>应用</strong>：<ul><li>主要用于地图制作、地理信息系统（GIS）、计算机图形学等领域。</li><li>用于表示特定位置的数据，如地标、监测点或特定事件的位置。</li></ul></li><li><strong>数据管理</strong>：<ul><li>点图的数据量可能较小，更注重于点的位置信息和查询效率。</li><li>可能不依赖于特定的文件格式，而是作为数据库或软件应用程序的一部分。</li></ul></li></ol><h3 id=总结>总结：</h3><ul><li><strong>数据量和细节</strong>：点云通常包含大量的点，用于详细表示物理对象；而点图可能包含较少的点，用于表示特定的信息。</li><li><strong>应用领域</strong>：点云主要用于三维建模和扫描；点图则更多用于地图制作和GIS。</li><li><strong>数据结构</strong>：点云是无序的数据集合；点图可能是有序的，且可能包含更复杂的数据结构来支持特定的查询和操作。</li></ul><p>尽管两者有区别，但在实际应用中，点图和点云的概念有时会交叉使用，尤其是在处理空间数据时。</p><h2 id=hugging-face><strong>Hugging Face</strong></h2><p><strong>Hugging Face</strong> 是一家专注于自然语言处理（NLP）和生成式人工智能的开源平台与工具提供商，广受开发者和研究人员欢迎。它以其强大的开源库和社区支持而闻名，致力于简化机器学习模型的开发、训练、部署和共享过程。</p><hr><h3 id=hugging-face-的主要组件><strong>Hugging Face 的主要组件</strong></h3><h3 id=1-transformers-库><strong>1. Transformers 库</strong></h3><ul><li><p>核心功能：</p><ul><li>提供大量预训练模型（如 BERT、GPT、T5 等）和 NLP 任务支持（如文本分类、翻译、生成、问答等）。</li><li>支持主流深度学习框架（PyTorch 和 TensorFlow）。</li><li>快速上手迁移学习，减少开发时间。</li></ul></li><li><p>示例代码：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>python</span>
</span></span><span class=line><span class=cl><span class=n>Copy</span> <span class=n>code</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>transformers</span> <span class=kn>import</span> <span class=n>pipeline</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用预训练模型进行文本分类</span>
</span></span><span class=line><span class=cl><span class=n>classifier</span> <span class=o>=</span> <span class=n>pipeline</span><span class=p>(</span><span class=s2>&#34;sentiment-analysis&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>result</span> <span class=o>=</span> <span class=n>classifier</span><span class=p>(</span><span class=s2>&#34;Hugging Face is amazing!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=2-datasets-库><strong>2. Datasets 库</strong></h3><ul><li><p>功能：</p><ul><li>提供多种开源数据集（包括 NLP 和多模态数据）。</li><li>支持高效加载、预处理和流式处理。</li><li>与 Transformers 完美集成。</li></ul></li><li><p>示例代码：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>python</span>
</span></span><span class=line><span class=cl><span class=n>Copy</span> <span class=n>code</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datasets</span> <span class=kn>import</span> <span class=n>load_dataset</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 加载 IMDb 数据集</span>
</span></span><span class=line><span class=cl><span class=n>dataset</span> <span class=o>=</span> <span class=n>load_dataset</span><span class=p>(</span><span class=s2>&#34;imdb&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>dataset</span><span class=p>[</span><span class=s2>&#34;train&#34;</span><span class=p>][</span><span class=mi>0</span><span class=p>])</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h3 id=3-hub><strong>3. Hub</strong></h3><ul><li>描述：<ul><li>一个在线平台，用于共享和托管模型、数据集和相关资源。</li><li>用户可以上传自己的模型或直接使用其他人共享的模型。</li><li>提供 API 接口，方便集成到应用中。</li></ul></li><li>示例：<ul><li>Hugging Face Hub 上可以找到 GPT、BERT 等预训练模型。</li></ul></li></ul><h3 id=4-accelerate><strong>4. Accelerate</strong></h3><ul><li>功能：<ul><li>提供简单的分布式训练工具。</li><li>支持多 GPU 和 TPU 环境下的高效训练。</li><li>降低训练大规模模型的技术门槛。</li></ul></li></ul><h3 id=5-other-libraries><strong>5. Other Libraries</strong></h3><ul><li><strong>Tokenizers</strong>：<ul><li>提供高效的子词分词工具，支持快速分词操作。</li></ul></li><li><strong>PEFT</strong>（Parameter-Efficient Fine-Tuning）：<ul><li>提供轻量化的微调工具，适合低资源环境。</li></ul></li><li><strong>Diffusers</strong>：<ul><li>主要用于生成式 AI 模型（如 Stable Diffusion）。</li></ul></li></ul><h2 id=faq>FAQ</h2><h3 id=1输入是什么几个视图>1、输入是什么，几个视图？</h3><p>默认应该是两视图（2张有重叠度图像），也可以是多视图</p><p>DUSt3R是一个基于 Transformer 的无监督三维重建模型，其核心优势在于能从单一视角的图像数据中生成稠密的三维点云。<br>虽然 DUST3R 本身并不是为多视角设计的，但它仍能处理多张来自不同视角的图像，只是每张图像通常会被独立处理，并在后期通过图像配准等技术合并成三维模型。</p><p>因此，<strong>DUST3R 本身主要针对两视角重建，虽然可以处理多个视角，但对于多视角图像的几何信息融合并没有专门的优化</strong>。它更多依赖于图像中的特征和深度估计进行重建。</p><h4 id=dust3r-处理的是图像对>DUST3R 处理的是图像对</h4><p><strong>DUST3R</strong>（Dense and Unsupervised Structure-from-Motion with Transformer-based Reconstruction）是一个无监督的三维重建模型，处理的输入通常是 <strong>一对图像</strong>，即两张从不同视角拍摄的图像。通过这种图像对，DUST3R 能够从图像的视差中推断出三维结构，生成稠密的三维点云。</p><ul><li><strong>图像对</strong>：DUST3R 基于来自不同视角的图像对进行重建。例如，给定两张具有一定视角差异的图像（例如，左右视图），DUST3R 会计算这些图像之间的匹配关系（例如，图像的特征匹配），并利用这些信息进行三维重建。</li><li><strong>单视角和多视角</strong>：你是对的，DUST3R 是专门设计来处理图像对的，而不是单视角图像。在这种方法中，DUST3R 通过深度学习模型学习如何从两张图像推断深度信息，并生成稠密的三维重建。因此，DUST3R 主要关注 <strong>两个视角之间的关系</strong>（而非一个单独的视角）。</li></ul><h4 id=为什么-dust3r-可以处理图像对>为什么 DUST3R 可以处理图像对</h4><p>DUST3R 利用图像对的结构来进行无监督学习和三维重建。这一过程利用了以下几个关键的步骤：</p><ol><li><strong>特征提取</strong>：<ul><li>DUST3R 会从每一张图像中提取特征（通常使用卷积神经网络）并通过这些特征来计算视差（disparity）或深度信息。</li></ul></li><li><strong>视差估计</strong>：<ul><li>通过计算两张图像之间的视差，DUST3R 能够推断出场景的深度信息。这个视差本质上是通过两张图像中同一物体的不同位置来估算的，这种方法与传统的立体视觉非常相似。</li></ul></li><li><strong>无监督学习</strong>：<ul><li>DUST3R 不依赖于人工标注的深度信息或相机位姿，而是通过无监督学习来优化三维重建。它通过最小化图像对之间的重建误差来优化模型，使得三维点云能够更好地匹配输入图像。</li></ul></li></ol><h4 id=dust3r-与多视角的关系>DUST3R 与多视角的关系</h4><p>虽然 DUST3R 主要是处理图像对，但在理论上，它可以扩展为处理多个图像视角。然而，DUST3R 设计时并没有专门优化为多视角（三张或更多图像）的重建任务。它是基于图像对的重建方法，也就是说，每次输入的是一对图像，通过计算它们之间的深度信息进行重建。</p><p>如果要处理多视角场景（比如多个视角的图像序列），则需要进行一些额外的步骤，如 <strong>图像配准</strong>、<strong>相机位姿估计</strong> 或其他图像对之间的匹配策略。<strong>MV-DUST3R+</strong>（DUST3R 的扩展版本）则专为处理多视角图像进行优化，能够在多个视角之间进行信息融合，从而提高重建精度。</p><h4 id=总结-1>总结</h4><ul><li><strong>DUST3R</strong> 主要处理 <strong>图像对</strong>，而不是单一视角的图像。</li><li>通过无监督学习，它从图像对中推断三维结构。</li><li>DUST3R 可以扩展到处理多视角图像，但其本身设计上是基于两张图像的立体重建模型。</li><li>如果需要处理更多视角或多个图像，<strong>MV-DUST3R+</strong> 是其更高版本，专门优化了多视角三维重建。</li></ul><h3 id=2点图如何理解>2、点图如何理解？</h3><p>一种抽象的三维数据结构，用于存储和管理空间中的点数据，此处可理解为二维图像点和对应的三维空间点以及它们之间的关系。</p><p>基于生成的点图可以推导出各种3d几何量，如相机参数、像素对应关系、深度图和完全一致的三维重建。</p><h1 id=nvs>NVS</h1><p><strong>Novel View Synthesis (NVS)</strong> 技术，中文通常称为“新视角合成”，是一种计算机视觉技术，旨在从一组给定的图像（通常是从不同视角拍摄的）中生成新的视角的图像。<br>通过这种技术，可以在没有真实拍摄的情况下生成从不同角度观察同一场景的图像。这项技术在计算机图形学、虚拟现实、增强现实、三维重建等领域具有广泛应用。</p><h3 id=基本概念>基本概念：</h3><p>NVS 目标是基于已有的图像数据，通过深度学习或传统图像处理技术生成场景的新的视角。<br>传统的图像合成通常依赖于事先已知的视角和场景深度信息，而 <strong>Novel View Synthesis</strong> 需要从有限的视角生成那些原本没有捕获的视角图像。</p><h3 id=技术实现方式>技术实现方式：</h3><p>Novel View Synthesis 的技术实现方法可以大致分为以下几种：</p><h4 id=1-基于图像的合成>1. <strong>基于图像的合成</strong>：</h4><p>这种方法基于给定的多个视角图像，通过几何重建和图像合成技术来生成新的视角图像。常见的实现方式包括：</p><ul><li><strong>视差图像合成</strong>：利用图像之间的视差信息，通过几何变换（如视角变换或深度图估计）来生成新视角的图像。</li><li><strong>多视角立体视觉</strong>：通过多视角图像的立体配准和视差计算，重建场景的三维结构，并生成新视角的图像。</li></ul><h4 id=2-基于深度学习的生成方法>2. <strong>基于深度学习的生成方法</strong>：</h4><p>近年来，基于深度学习的 Novel View Synthesis 方法得到了广泛关注。这些方法通常使用生成对抗网络（GAN）或卷积神经网络（CNN）进行训练，直接从多个输入视角图像中学习到场景的深层特征，并生成新的视角图像。</p><ul><li><strong>视角变换网络（View Synthesis Networks）</strong>：这些网络直接学习如何将已有视角的图像映射到新的视角图像。常见的模型有 <strong>DeepVoxels</strong>、<strong>NeRF（Neural Radiance Fields）</strong>、<strong>Mip-NeRF</strong>、<strong>PIFu</strong> 等。</li><li><strong>神经辐射场（Neural Radiance Fields, NeRF）</strong>：NeRF 是一种基于深度学习的重建模型，采用全新的方式通过深度神经网络直接从多个视角的图像生成高质量的三维重建和新的视角图像。它通过对场景进行隐式建模来生成从任意视角的图像。</li></ul><h4 id=3-基于体积渲染的合成>3. <strong>基于体积渲染的合成</strong>：</h4><p>这种方法通过对场景的 3D 信息进行建模，通常需要场景的 <strong>体积数据</strong> 或 <strong>深度信息</strong>，并利用这些数据通过渲染技术生成新视角的图像。</p><ul><li><strong>体积渲染（Volume Rendering）</strong>：通过体积渲染方法，将多个视角的图像数据投影到一个三维空间内，并对该空间进行渲染，生成从新视角看到的图像。</li></ul><h4 id=4-基于稀疏稠密点云的重建>4. <strong>基于稀疏/稠密点云的重建</strong>：</h4><p>利用多个视角的图像生成稀疏或稠密的三维点云，然后通过合成或体积渲染等技术生成新视角的图像。这种方法通常依赖于图像的匹配、立体视觉和三维重建技术。</p><h3 id=关键技术与方法>关键技术与方法：</h3><h4 id=1-神经辐射场-nerf>1. <strong>神经辐射场 (NeRF)</strong></h4><p>NeRF 是一种新兴的 <strong>Novel View Synthesis</strong> 技术，通过训练一个神经网络，直接从多个视角的 2D 图像生成一个 3D 场景的隐式表示，然后可以用来合成从任意新视角的图像。NeRF 基于体积渲染的理念，能够生成高质量、逼真的 3D 图像，特别适用于复杂的场景和高质量渲染。NeRF 的工作原理大致如下：</p><ul><li>将每个视角的图像和相机参数输入到神经网络。</li><li>神经网络学习从图像中提取特征，并输出每个点的颜色和密度。</li><li>利用体积渲染技术，将这些信息整合在一起，从而生成不同视角的图像。</li></ul><h4 id=2-视角变换网络view-synthesis-networks>2. <strong>视角变换网络（View Synthesis Networks）</strong></h4><p>这类方法使用深度卷积神经网络（CNN）来学习不同视角之间的映射关系，进而进行新视角图像的合成。例如：</p><ul><li><strong>DeepVoxels</strong>：通过学习不同视角图像的特征映射，生成目标视角的图像。</li><li><strong>PIFu (Pixel-Aligned Implicit Function)</strong>：一种基于深度学习的模型，能够生成更高精度的三维重建，并从任意视角生成图像。</li></ul><h4 id=3-基于图像配准与几何建模的方法>3. <strong>基于图像配准与几何建模的方法</strong></h4><p>通过图像之间的配准和深度图的重建，基于几何变换（如视差、立体视觉等）合成新视角图像。这种方法通常依赖于传统的计算机视觉技术，如光束法平差（Bundle Adjustment）和多视图立体重建。</p><h3 id=应用领域>应用领域：</h3><ol><li><strong>虚拟现实与增强现实（VR/AR）</strong>：<ul><li>在 VR/AR 应用中，用户可以从任何角度查看三维虚拟场景，Novel View Synthesis 可以在有限的视角下生成从其他视角观察场景的图像，提升沉浸感。</li></ul></li><li><strong>电影与游戏产业</strong>：<ul><li>利用 NVS 技术，可以为电影和游戏制作逼真的虚拟环境或人物角色的不同视角动画。</li></ul></li><li><strong>三维重建与测绘</strong>：<ul><li>使用 NVS 技术生成高质量的三维场景模型，广泛应用于建筑建模、城市规划、文化遗产保护等领域。</li></ul></li><li><strong>自动驾驶与机器人视觉</strong>：<ul><li>NVS 技术可以用来生成从不同视角观察到的环境图像，帮助自动驾驶系统或机器人进行决策与路径规划。</li></ul></li><li><strong>医学成像</strong>：<ul><li>在医学领域，NVS 技术可以根据不同的医学影像（如 CT、MRI）生成新视角的图像，用于诊断和手术规划。</li></ul></li></ol><h3 id=总结-2>总结</h3><p><strong>Novel View Synthesis (NVS)</strong> 是一种基于现有图像数据生成新视角图像的技术，具有广泛的应用前景，尤其在虚拟现实、增强现实、三维重建和计算机图形学等领域。随着深度学习技术的进步，尤其是像 <strong>NeRF</strong> 这样的模型，NVS 的质量和应用范围正不断拓展，能够生成更加真实和高质量的三维场景。</p><h1 id=mast3r>MASt3R</h1><p>和DUSt3R同一机构，naver</p><p><a href=https://mp.weixin.qq.com/s/CYXz_T3wwM3eli7jRUgqRQ target=_blank rel="noopener noreffer">https://mp.weixin.qq.com/s/CYXz_T3wwM3eli7jRUgqRQ</a></p><p>改进dust3r，增强了特征匹配和鲁棒性</p><h1 id=monst3r>monst3R</h1><p>待续&mldr;</p><h1 id=mv-dust3r>MV-DUSt3R+</h1><p>多视角密集无约束三维重建</p><p>Multi-View Dense Unconstrained Stereo 3D Reconstruction</p><p>是 DUSt3R 算法的扩展，通过优化算法组件和实现方式，在不牺牲准确性的情况下，实现了显著的计算效率提升。这种改进使得 DUSt3R+ 能够更快地处理大量图像数据，从而加快了三维重建的速度。</p><p>多视角支持</p><p>改进的 Transformer 模型，更好地处理图像之间的时序和空间依赖关系</p><h3 id=general-comprehension>General Comprehension</h3><p>To handle more views, reduce errors, and improve inference time</p><p>多视角、高精度、快速</p><p>MV-DUSt3R its core are <strong>multi-view decoder blocks</strong> which exchange information across any number of views while considering one reference view.</p><p>MV-DUSt3R+ employs <strong>cross-reference-view blocks</strong> to fuse information across different reference view choices.</p><h3 id=contrast>contrast</h3><h3 id=mv-dust3r-相较于-dust3r-的改进与提升>MV-DUST3R+ 相较于 DUST3R 的改进与提升</h3><p><strong>MV-DUST3R+</strong> 是 <strong>DUST3R</strong> 的扩展版本，专门针对 <strong>多视角</strong> 的三维重建任务进行优化，改进和提升主要体现在以下几个方面：</p><ol><li><strong>多视角信息融合</strong>：<ul><li><strong>DUST3R</strong> 主要依赖单视角图像的深度推断进行三维重建。而 <strong>MV-DUST3R+</strong> 专为处理多视角图像序列设计，能够从多个视角的图像数据中有效地提取和融合空间几何信息。通过集成多个视角，MV-DUST3R+ 能够捕捉到更丰富的场景信息，提升了重建精度和细节。</li><li>在 <strong>MV-DUST3R+</strong> 中，<strong>Transformer 模型</strong> 被用来增强不同视角之间的空间关系建模，能够更好地融合来自不同视角的特征和深度信息。这种方法提高了多视角图像中相对位置和场景几何信息的理解，从而提供更为精确的三维结构重建。</li></ul></li><li><strong>基于 Transformer 的增强特征建模</strong>：<ul><li><strong>DUST3R</strong> 使用 Transformer 进行单视角图像特征的建模和三维重建，但它主要侧重于处理单张图像中的深度信息。</li><li><strong>MV-DUST3R+</strong> 在此基础上做了扩展，优化了 Transformer 模型的结构，使其能更好地处理多个视角图像的相互关系。特别是，它采用了 <strong>自注意力机制</strong>，能够通过不同视角的图像之间的信息传递，更好地捕捉和建模三维场景的全局几何。</li></ul></li><li><strong>多视角优化</strong>：<ul><li><strong>MV-DUST3R+</strong> 采用了多视角图像的联合优化，能够在不同图像之间共享信息，以减少由于单一视角带来的重建误差。传统的三维重建方法通常依赖图像匹配和相机位姿估计，而 <strong>MV-DUST3R+</strong> 通过深度学习网络直接从图像中学习这些几何信息，避免了传统方法中的复杂预处理和人工干预。</li><li>这使得 <strong>MV-DUST3R+</strong> 能在更多复杂的场景中表现出更高的鲁棒性，例如动态场景、遮挡物、光照变化等。</li></ul></li><li><strong>端到端的无监督训练</strong>：<ul><li>和 DUST3R 一样，<strong>MV-DUST3R+</strong> 依然保持了无监督学习的特点，不需要人工标注的训练数据。这使得它能够在没有标定数据的情况下进行训练，并且能够根据输入的图像自动推断场景的三维结构。</li><li>由于优化了多视角的联合训练，<strong>MV-DUST3R+</strong> 在多视角的情况下，也能更好地学习到不同图像之间的几何关系，增强了场景的重建质量。</li></ul></li><li><strong>稠密点云和高精度重建</strong>：<ul><li><strong>MV-DUST3R+</strong> 改进了点云生成的策略，能够提供更高精度的稠密重建。通过多视角图像的联合推断，网络能够生成更细致、更准确的三维点云，相比单视角重建的精度和细节有显著提升。</li></ul></li></ol><h3 id=总结-3>总结</h3><ul><li><strong>DUST3R</strong> 主要是为单视角三维重建设计的，虽然可以处理多张图像，但它的优化并未特别针对多视角信息的融合。</li><li><strong>MV-DUST3R+</strong> 在 DUST3R 的基础上进行了多视角支持的扩展，使用 Transformer 强化了多视角图像之间的几何关系建模，能够从多个视角中提取信息并进行联合优化，最终提供更高精度的稠密三维重建。</li></ul><p><strong>MV-DUST3R+</strong> 相比 <strong>DUST3R</strong> 的提升主要体现在以下几个方面：</p><ol><li>更强的多视角信息融合能力；</li><li>基于 Transformer 的全局空间建模；</li><li>无监督的端到端优化训练；</li><li>提高了稠密三维点云的精度。</li></ol><p>这些改进使得 <strong>MV-DUST3R+</strong> 在处理动态、复杂的三维场景时比 <strong>DUST3R</strong> 更加精确和鲁棒，特别是在多个视角图像的重建任务中表现更好。</p><h3 id=faq-1>FAQ</h3><p>1、如何扩展到处理多视角，实现细节？</p><p>2、如何提升性能，精度和速度方面，实现细节？</p><h1 id=fast3r>Fast3R</h1><h2 id=faq-2>FAQ</h2><p><code>1、pts3d_in_other_view是哪个view(相机坐标系)</code></p><p>2、默认所有图像是相同焦距<br><code>first_view_from_global_head</code></p><p>3、位姿估计 fast_pnp 100个点</p><p>能否改进</p><p>4、convert to colmap format</p><h1 id=instantsplat>instantsplat</h1><p>老版基于dust3r，新版基于mast3r</p><h2 id=pipeline>pipeline</h2><h3 id=1点云生成>1、点云生成</h3><p>load预训练模型，成对预测点图，并进行全局对齐（需要训练），将最终结果以类colmap数据格式写入原始数据目录</p><p><code>内参是换算成了原始图像分辨率下的</code></p><p><code>进行了根据置信度直接点云下采样(dsp)</code></p><p>.<br>├── images <code>原始图像</code><br>│   ├── IMG20250219135528.jpg<br>│   ├── IMG20250219135531.jpg<br>│   ├── IMG20250219135535.jpg<br>│   ├── IMG20250219135536.jpg<br>│   └── IMG20250219135538.jpg<br>└── sparse_5 <code>colmap格式数据目录</code><br>├── 0 <code>for train</code><br>│   ├── cameras.bin<br>│   ├── cameras.txt <code>相机内参（对应原始图像）</code><br>│   ├── confidence.npy <code>点图置信度（N_views,H*W*3）</code><br>│   ├── confidence_dsp.npy <code>过滤后的置信度（n_pts,1）</code><br>│   ├── images.bin<br>│   ├── images.txt <code>图像外参</code><br>│   ├── imgs_5 <code>ViT模型缩放后的图像</code><br>│   │   ├── IMG20250219135528.jpg<br>│   │   ├── IMG20250219135531.jpg<br>│   │   ├── IMG20250219135535.jpg<br>│   │   ├── IMG20250219135536.jpg<br>│   │   └── IMG20250219135538.jpg<br>│   ├── non_scaled_focals.npy <code>模型直接估计出的focals（与缩放图像对应）</code><br>│   ├── overlapping_masks_5 <code>根据置信度生成的mask</code><br>│   │   ├── IMG20250219135528.jpg <code>depth_thre default=0.01</code><br>│   │   ├── IMG20250219135531.jpg<br>│   │   ├── IMG20250219135535.jpg<br>│   │   ├── IMG20250219135536.jpg<br>│   │   └── IMG20250219135538.jpg<br>│   ├── points3D.ply <code>置信度下采样后的点云（pts+col）(mask(n_views*h*w), 3)</code><br>│   ├── points3D_all.npy <code>完全密集点云（点图）(n_views,h,w,3)</code><br>│   └── pointsColor_all.npy <code>点图对应的颜色信息</code><br>└── 1 <code>for eval</code></p><p>6 directories, 25 files</p><h3 id=2点云转高斯>2、点云转高斯</h3><p>初始化高斯模型和场景，读取上一步类colmap格式数据并生成场景信息，进行高斯参数的迭代训练（关闭了Densification环节）</p><p>loss = (1.0 - opt.lambda_dssim) * Ll1 + opt.lambda_dssim * (1.0 - ssim_value)</p><p><strong><code>相比原版高斯，增加了优化相机位姿</code></strong></p><p><code>图像读取的也都是原始分辨率的，dataset_readers.py</code></p><p><code>def readColmapCameras(cam_extrinsics, cam_intrinsics, images_folder)</code></p><h3 id=3渲染出图及合成视频>3、渲染出图及合成视频</h3><p>load高斯模型和场景信息，根据原相机位姿插值形成多个相机，对所有相机位姿进行render出图并保存，最后将图像沿路径合成视频</p><p><code>使用训练的模型、优化后的位姿、原始图像，去插值、渲染图像并合成视频</code></p><h2 id=chunked-pcd-align>chunked pcd align</h2><p>colmap format content:</p><p>1 图像外参</p><p>只要融合点云中有相关点就保留</p><p>需要将target点云变换到source点云坐标系</p><p>2 相机内参</p><p>同上，图像分辨率/像素尺寸不变就不变</p><p>3 ply点云 分为完全密集点云和dsp下采样之后的</p><p>完全密集点云只跟图像相关，好像用不到</p><p>dsp就是融合之后的实际点云</p><p>4 npy图像数据（即点云颜色）</p><p>只跟保留的图像相关，好像用不到</p><p>5 原图、下采样的mask</p><p>下采样的mask需要根据点云融合情况相应调整</p><h3 id=merge-input-data-structure>merge input data structure</h3><p>1 每个视频按文件名存放在assets下面，每个分块数据保存在一个chunk文件夹下，</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/posts/dust3r%E7%B3%BB%E5%88%97/image.png data-srcset="/posts/dust3r%E7%B3%BB%E5%88%97/image.png, /posts/dust3r%E7%B3%BB%E5%88%97/image.png 1.5x, /posts/dust3r%E7%B3%BB%E5%88%97/image.png 2x" data-sizes=auto alt=/posts/dust3r%E7%B3%BB%E5%88%97/image.png title=image.png width=330 height=526></p><p>每个分块数据调用VGGT模型，生成分块目录下colmap格式文件，再将配准、融合结果生成到merged目录下，后续训练高斯直接读取merged目录</p><p>── images<br>│ ├── frame_0001.jpg<br>│ ├── frame_0004.jpg<br>│ ├── frame_0007.jpg<br>└── sparse_3<br>└── 0<br>├── cameras.txt<br>├── images.txt<br>├── points3D.ply<br>├── refined_transformation.xxx</p><h2 id=faq-3>FAQ</h2><h3 id=插值视频生成报错>插值视频生成报错</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=sb>`</span>imageio<span class=sb>`</span> 默认不包含视频编解码器，需额外安装插件：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>### **安装 FFMPEG 后端**</span>
</span></span><span class=line><span class=cl>pip install imageio<span class=o>[</span>ffmpeg<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>### **安装 PyAV 后端**</span>
</span></span><span class=line><span class=cl>pip install imageio<span class=o>[</span>pyav<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=分块融合的必要数据>分块融合的必要数据</h3><p>1、图像（原始、缩放）</p><p>原始图像是直接提供的，缩放图像是经过ViT模型处理后输出保存的</p><p><code>instantsplat默认读取的是原始分辨率的（与内参对应），实际也可以读取缩放的，只要内参和分辨率对应就行</code></p><p>2、内外参</p><p><code>cameras_extrinsic_file = os.path.join(path, f"sparse_{args.n_views}/0", "images.txt")</code></p><p><code>cameras_intrinsic_file = os.path.join(path, f"sparse_{args.n_views}/0", "cameras.txt")</code></p><p>3、融合后点云</p><p><code>ply_path = os.path.join(path, "sparse/0/points3D.ply")</code><br><code>pcd = fetchPly(ply_path)</code></p><p>4、下采样置信度dsp（per-point-optimizer需要，融合时需要保存筛选后点云在输入点云中的索引信息，可能会增加耗时）</p><p><code>非必需，可以不要</code></p><h1 id=vggt>VGGT</h1><img src=vggt-architecture.png width=75%>
<img src=vggt架构核心.png width=75%>
<img src=网络性能提升.png width=75%>
<img src=问题思考.png width=75%></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2025-04-27</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://fjyu95.github.io/posts/dust3r%E7%B3%BB%E5%88%97/ data-title=DUSt3R系列学习 data-hashtags=3d,colmap,DUSt3R,VGGT><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://fjyu95.github.io/posts/dust3r%E7%B3%BB%E5%88%97/ data-hashtag=3d><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://fjyu95.github.io/posts/dust3r%E7%B3%BB%E5%88%97/ data-title=DUSt3R系列学习><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://fjyu95.github.io/posts/dust3r%E7%B3%BB%E5%88%97/ data-title=DUSt3R系列学习><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://fjyu95.github.io/posts/dust3r%E7%B3%BB%E5%88%97/ data-title=DUSt3R系列学习><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/3d/>3d</a>,&nbsp;<a href=/tags/colmap/>Colmap</a>,&nbsp;<a href=/tags/dust3r/>DUSt3R</a>,&nbsp;<a href=/tags/vggt/>VGGT</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/diy%E8%A3%85%E6%9C%BA/ class=prev rel=prev title=DIY装机><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>DIY装机</a>
<a href=/posts/rgbd%E7%9B%B8%E6%9C%BA/ class=next rel=next title=RGB-D相机基本原理>RGB-D相机基本原理<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2020 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://fjyu95.github.io/ target=_blank>fjyu95</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>